!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r;r="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,r.cql=e()}}(function(){var e;return function r(e,t,n){function i(o,c){if(!t[o]){if(!e[o]){var u="function"==typeof require&&require;if(!c&&u)return u(o,!0);if(a)return a(o,!0);var s=new Error("Cannot find module '"+o+"'");throw s.code="MODULE_NOT_FOUND",s}var l=t[o]={exports:{}};e[o][0].call(l.exports,function(r){var t=e[o][1][r];return i(t?t:r)},l,l.exports,r,e,t,n)}return t[o].exports}for(var a="function"==typeof require&&require,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(e,r,t){},{}],2:[function(r,t,n){!function(r,i){"object"==typeof n&&"undefined"!=typeof t?i(n):"function"==typeof e&&e.amd?e("d3-time",["exports"],i):i(r.d3_time={})}(this,function(e){"use strict";function r(e,t,n,o){function c(r){return e(r=new Date(+r)),r}return c.floor=c,c.round=function(r){var n=new Date(+r),i=new Date(r-1);return e(n),e(i),t(i,1),i-r>r-n?n:i},c.ceil=function(r){return e(r=new Date(r-1)),t(r,1),r},c.offset=function(e,r){return t(e=new Date(+e),null==r?1:Math.floor(r)),e},c.range=function(r,n,i){var a=[];if(r=new Date(r-1),n=new Date(+n),i=null==i?1:Math.floor(i),!(n>r&&i>0))return a;for(t(r,1),e(r),n>r&&a.push(new Date(+r));t(r,i),e(r),n>r;)a.push(new Date(+r));return a},c.filter=function(n){return r(function(r){for(;e(r),!n(r);)r.setTime(r-1)},function(e,r){for(;--r>=0;)for(;t(e,1),!n(e););})},n&&(c.count=function(r,t){return i.setTime(+r),a.setTime(+t),e(i),e(a),Math.floor(n(i,a))},c.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?c.filter(o?function(r){return o(r)%e===0}:function(r){return c.count(0,r)%e===0}):c:null}),c}function t(e){return r(function(r){r.setHours(0,0,0,0),r.setDate(r.getDate()-(r.getDay()+7-e)%7)},function(e,r){e.setDate(e.getDate()+7*r)},function(e,r){return(r-e-6e4*(r.getTimezoneOffset()-e.getTimezoneOffset()))/6048e5})}function n(e){return r(function(r){r.setUTCHours(0,0,0,0),r.setUTCDate(r.getUTCDate()-(r.getUTCDay()+7-e)%7)},function(e,r){e.setUTCDate(e.getUTCDate()+7*r)},function(e,r){return(r-e)/6048e5})}var i=new Date,a=new Date,o=r(function(){},function(e,r){e.setTime(+e+r)},function(e,r){return r-e});o.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?r(function(r){r.setTime(Math.floor(r/e)*e)},function(r,t){r.setTime(+r+t*e)},function(r,t){return(t-r)/e}):o:null};var c=r(function(e){e.setMilliseconds(0)},function(e,r){e.setTime(+e+1e3*r)},function(e,r){return(r-e)/1e3},function(e){return e.getSeconds()}),u=r(function(e){e.setSeconds(0,0)},function(e,r){e.setTime(+e+6e4*r)},function(e,r){return(r-e)/6e4},function(e){return e.getMinutes()}),s=r(function(e){e.setMinutes(0,0,0)},function(e,r){e.setTime(+e+36e5*r)},function(e,r){return(r-e)/36e5},function(e){return e.getHours()}),l=r(function(e){e.setHours(0,0,0,0)},function(e,r){e.setDate(e.getDate()+r)},function(e,r){return(r-e-6e4*(r.getTimezoneOffset()-e.getTimezoneOffset()))/864e5},function(e){return e.getDate()-1}),p=t(0),E=t(1),f=t(2),T=t(3),S=t(4),d=t(5),A=t(6),y=r(function(e){e.setHours(0,0,0,0),e.setDate(1)},function(e,r){e.setMonth(e.getMonth()+r)},function(e,r){return r.getMonth()-e.getMonth()+12*(r.getFullYear()-e.getFullYear())},function(e){return e.getMonth()}),I=r(function(e){e.setHours(0,0,0,0),e.setMonth(0,1)},function(e,r){e.setFullYear(e.getFullYear()+r)},function(e,r){return r.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()}),h=r(function(e){e.setUTCMilliseconds(0)},function(e,r){e.setTime(+e+1e3*r)},function(e,r){return(r-e)/1e3},function(e){return e.getUTCSeconds()}),g=r(function(e){e.setUTCSeconds(0,0)},function(e,r){e.setTime(+e+6e4*r)},function(e,r){return(r-e)/6e4},function(e){return e.getUTCMinutes()}),N=r(function(e){e.setUTCMinutes(0,0,0)},function(e,r){e.setTime(+e+36e5*r)},function(e,r){return(r-e)/36e5},function(e){return e.getUTCHours()}),L=r(function(e){e.setUTCHours(0,0,0,0)},function(e,r){e.setUTCDate(e.getUTCDate()+r)},function(e,r){return(r-e)/864e5},function(e){return e.getUTCDate()-1}),O=n(0),m=n(1),C=n(2),_=n(3),R=n(4),v=n(5),P=n(6),D=r(function(e){e.setUTCHours(0,0,0,0),e.setUTCDate(1)},function(e,r){e.setUTCMonth(e.getUTCMonth()+r)},function(e,r){return r.getUTCMonth()-e.getUTCMonth()+12*(r.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()}),M=r(function(e){e.setUTCHours(0,0,0,0),e.setUTCMonth(0,1)},function(e,r){e.setUTCFullYear(e.getUTCFullYear()+r)},function(e,r){return r.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()}),U=o.range,x=c.range,G=u.range,F=s.range,X=l.range,b=p.range,B=E.range,H=f.range,k=T.range,w=S.range,Y=d.range,W=A.range,Q=p.range,K=y.range,V=I.range,Z=o,q=U,z=h.range,j=g.range,$=N.range,J=L.range,ee=O.range,re=m.range,te=C.range,ne=_.range,ie=R.range,ae=v.range,oe=P.range,ce=O.range,ue=D.range,se=M.range,le="0.1.1";e.version=le,e.milliseconds=U,e.seconds=x,e.minutes=G,e.hours=F,e.days=X,e.sundays=b,e.mondays=B,e.tuesdays=H,e.wednesdays=k,e.thursdays=w,e.fridays=Y,e.saturdays=W,e.weeks=Q,e.months=K,e.years=V,e.utcMillisecond=Z,e.utcMilliseconds=q,e.utcSeconds=z,e.utcMinutes=j,e.utcHours=$,e.utcDays=J,e.utcSundays=ee,e.utcMondays=re,e.utcTuesdays=te,e.utcWednesdays=ne,e.utcThursdays=ie,e.utcFridays=ae,e.utcSaturdays=oe,e.utcWeeks=ce,e.utcMonths=ue,e.utcYears=se,e.millisecond=o,e.second=c,e.minute=u,e.hour=s,e.day=l,e.sunday=p,e.monday=E,e.tuesday=f,e.wednesday=T,e.thursday=S,e.friday=d,e.saturday=A,e.week=p,e.month=y,e.year=I,e.utcSecond=h,e.utcMinute=g,e.utcHour=N,e.utcDay=L,e.utcSunday=O,e.utcMonday=m,e.utcTuesday=C,e.utcWednesday=_,e.utcThursday=R,e.utcFriday=v,e.utcSaturday=P,e.utcWeek=O,e.utcMonth=D,e.utcYear=M,e.interval=r})},{}],3:[function(e,r,t){function n(e){if(!e)throw Error("Missing binning options.");var r,t,n,c,u,s,l,p=e.maxbins||15,E=e.base||10,f=Math.log(E),T=e.div||[5,2],S=e.min,d=e.max,A=d-S;if(e.step)r=e.step;else if(e.steps)r=e.steps[Math.min(e.steps.length-1,i(e.steps,A/p,0,e.steps.length))];else{for(t=Math.ceil(Math.log(p)/f),n=e.minstep||0,r=Math.max(n,Math.pow(E,Math.round(Math.log(A)/f)-t));Math.ceil(A/r)>p;)r*=E;for(s=0;s<T.length;++s)u=r/T[s],u>=n&&p>=A/u&&(r=u)}return u=Math.log(r),c=u>=0?0:~~(-u/f)+1,l=Math.pow(E,-c-1),S=Math.min(S,Math.floor(S/r+l)*r),d=Math.ceil(d/r)*r,{start:S,stop:d,step:r,unit:{precision:c},value:a,index:o}}function i(e,r,t,n){for(;n>t;){var i=t+n>>>1;s.cmp(e[i],r)<0?t=i+1:n=i}return t}function a(e){return this.step*Math.floor(e/this.step+p)}function o(e){return Math.floor((e-this.start)/this.step+p)}function c(e){return this.unit.date(a.call(this,e))}function u(e){return o.call(this,this.unit.unit(e))}var s=e("../util"),l=e("../time"),p=1e-15;n.date=function(e){if(!e)throw Error("Missing date binning options.");var r=e.utc?l.utc:l,t=e.min,i=e.max,a=e.maxbins||20,o=e.minbins||4,s=+i-+t,p=e.unit?r[e.unit]:r.find(s,o,a),E=n({min:null!=p.min?p.min:p.unit(t),max:null!=p.max?p.max:p.unit(i),maxbins:a,minstep:p.minstep,steps:p.step});return E.unit=p,E.index=u,e.raw||(E.value=c),E},r.exports=n},{"../time":7,"../util":8}],4:[function(e,r,t){var n=e("./util"),i=r.exports;i.repeat=function(e,r){var t,n=Array(r);for(t=0;r>t;++t)n[t]=e;return n},i.zeros=function(e){return i.repeat(0,e)},i.range=function(e,r,t){if(arguments.length<3&&(t=1,arguments.length<2&&(r=e,e=0)),(r-e)/t==1/0)throw new Error("Infinite range");var n,i=[],a=-1;if(0>t)for(;(n=e+t*++a)>r;)i.push(n);else for(;(n=e+t*++a)<r;)i.push(n);return i},i.random={},i.random.uniform=function(e,r){void 0===r&&(r=void 0===e?1:e,e=0);var t=r-e,n=function(){return e+t*Math.random()};return n.samples=function(e){return i.zeros(e).map(n)},n.pdf=function(n){return n>=e&&r>=n?1/t:0},n.cdf=function(n){return e>n?0:n>r?1:(n-e)/t},n.icdf=function(r){return r>=0&&1>=r?e+r*t:NaN},n},i.random.integer=function(e,r){void 0===r&&(r=e,e=0);var t=r-e,n=function(){return e+Math.floor(t*Math.random())};return n.samples=function(e){return i.zeros(e).map(n)},n.pdf=function(n){return n===Math.floor(n)&&n>=e&&r>n?1/t:0},n.cdf=function(n){var i=Math.floor(n);return e>i?0:i>=r?1:(i-e+1)/t},n.icdf=function(r){return r>=0&&1>=r?e-1+Math.floor(r*t):NaN},n},i.random.normal=function(e,r){e=e||0,r=r||1;var t,n=function(){var n,i,a=0,o=0;if(void 0!==t)return a=t,t=void 0,a;do a=2*Math.random()-1,o=2*Math.random()-1,n=a*a+o*o;while(0===n||n>1);return i=Math.sqrt(-2*Math.log(n)/n),t=e+o*i*r,e+a*i*r};return n.samples=function(e){return i.zeros(e).map(n)},n.pdf=function(t){var n=Math.exp(Math.pow(t-e,2)/(-2*Math.pow(r,2)));return 1/(r*Math.sqrt(2*Math.PI))*n},n.cdf=function(t){var n,i=(t-e)/r,a=Math.abs(i);if(a>37)n=0;else{var o,c=Math.exp(-a*a/2);7.07106781186547>a?(o=.0352624965998911*a+.700383064443688,o=o*a+6.37396220353165,o=o*a+33.912866078383,o=o*a+112.079291497871,o=o*a+221.213596169931,o=o*a+220.206867912376,n=c*o,o=.0883883476483184*a+1.75566716318264,o=o*a+16.064177579207,o=o*a+86.7807322029461,o=o*a+296.564248779674,o=o*a+637.333633378831,o=o*a+793.826512519948,o=o*a+440.413735824752,n/=o):(o=a+.65,o=a+4/o,o=a+3/o,o=a+2/o,o=a+1/o,n=c/o/2.506628274631)}return i>0?1-n:n},n.icdf=function(t){if(0>=t||t>=1)return NaN;var n=2*t-1,i=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),a=2/(Math.PI*i)+Math.log(1-Math.pow(n,2))/2,o=Math.log(1-n*n)/i,c=(n>0?1:-1)*Math.sqrt(Math.sqrt(a*a-o)-a);return e+r*Math.SQRT2*c},n},i.random.bootstrap=function(e,r){var t=e.filter(n.isValid),a=t.length,o=r?i.random.normal(0,r):null,c=function(){return t[~~(Math.random()*a)]+(o?o():0)};return c.samples=function(e){return i.zeros(e).map(c)},c}},{"./util":8}],5:[function(e,r,t){function n(e,r){return r?void(e[s]=r):e&&e[s]||null}function i(e,r){e=u.array(e),r=u.$(r);var t,n,i;if(e[s]&&(t=r(e[s]),u.isString(t)))return t;for(n=0,i=e.length;!u.isValid(t)&&i>n;++n)t=r?r(e[n]):e[n];return u.isDate(t)?"date":u.isNumber(t)?"number":u.isBoolean(t)?"boolean":u.isString(t)?"string":null}function a(e,r){return e.length?(r=r||u.keys(e[0]),r.reduce(function(r,t){return r[t]=i(e,t),r},{})):void 0}function o(e,r){e=u.array(e),r=u.$(r);var t,n,i,a=["boolean","integer","number","date"];for(t=0;t<e.length;++t){for(i=r?r(e[t]):e[t],n=0;n<a.length;++n)u.isValid(i)&&!p[a[n]](i)&&(a.splice(n,1),n-=1);if(0===a.length)return"string"}return a[0]}function c(e,r){return r=r||u.keys(e[0]),r.reduce(function(r,t){return r[t]=o(e,t),r},{})}var u=e("../util"),s="__types__",l={"boolean":u["boolean"],integer:u.number,number:u.number,date:u.date,string:function(e){return""===e?null:e}},p={"boolean":function(e){return"true"===e||"false"===e||u.isBoolean(e)},integer:function(e){return p.number(e)&&(e=+e)===~~e},number:function(e){return!isNaN(+e)&&!u.isDate(e)},date:function(e){return!isNaN(Date.parse(e))}};i.annotation=n,i.all=a,i.infer=o,i.inferAll=c,i.parsers=l,r.exports=i},{"../util":8}],6:[function(e,r,t){function n(e,r,t){var n=e&&e.nullh||0,i=u.random.normal(0,1),a=s.mean(r,t),o=s.stdev(r,t)/Math.sqrt(s.count.valid(r,t));if(0===o)return a-n===0?1:0;var c=(a-n)/o;return 2*i.cdf(-Math.abs(c))}function i(e,r,t,n){var i,a=n?r.map(o.$(t)):r,c=n?r.map(o.$(n)):t,u=s.count(a),l=s.count(c),p=Array();if(u!==l)throw Error("Array lengths must match.");for(i=0;u>i;++i)o.isValid(a[i])&&o.isValid(c[i])&&p.push(a[i]-c[i]);return s.z.test(p,e&&e.nullh||0)}function a(e,r,t,n){var i=n?r.map(o.$(t)):r,a=n?r.map(o.$(n)):t,c=s.count.valid(i),l=s.count.valid(a),p=u.random.normal(0,1),E=s.mean(i)-s.mean(a)-(e&&e.nullh||0),f=Math.sqrt(s.variance(i)/c+s.variance(a)/l);if(0===f)return 0===E?1:0;var T=E/f;return 2*p.cdf(-Math.abs(T))}var o=e("./util"),c=e("./import/type"),u=e("./generate"),s=r.exports;s.unique=function(e,r,t){r=o.$(r),t=t||[];var n,i,a,c={};for(i=0,a=e.length;a>i;++i)n=r?r(e[i]):e[i],n in c||(c[n]=1,t.push(n));return t},s.count=function(e){return e&&e.length||0},s.count.valid=function(e,r){r=o.$(r);var t,n,i,a=0;for(n=0,i=e.length;i>n;++n)t=r?r(e[n]):e[n],o.isValid(t)&&(a+=1);return a},s.count.missing=function(e,r){r=o.$(r);var t,n,i,a=0;for(n=0,i=e.length;i>n;++n)t=r?r(e[n]):e[n],null==t&&(a+=1);return a},s.count.distinct=function(e,r){r=o.$(r);var t,n,i,a={},c=0;for(n=0,i=e.length;i>n;++n)t=r?r(e[n]):e[n],t in a||(a[t]=1,c+=1);return c},s.count.map=function(e,r){r=o.$(r);var t,n,i,a={};for(n=0,i=e.length;i>n;++n)t=r?r(e[n]):e[n],a[t]=t in a?a[t]+1:1;return a},s.median=function(e,r){return r&&(e=e.map(o.$(r))),e=e.filter(o.isValid).sort(o.cmp),s.quantile(e,.5)},s.quartile=function(e,r){r&&(e=e.map(o.$(r))),e=e.filter(o.isValid).sort(o.cmp);var t=s.quantile;return[t(e,.25),t(e,.5),t(e,.75)]},s.quantile=function(e,r,t){void 0===t&&(t=r,r=o.identity),r=o.$(r);var n=(e.length-1)*t+1,i=Math.floor(n),a=+r(e[i-1]),c=n-i;return c?a+c*(r(e[i])-a):a},s.sum=function(e,r){r=o.$(r);for(var t,n=0,i=0,a=e.length;a>i;++i)t=r?r(e[i]):e[i],o.isValid(t)&&(n+=t);return n},s.mean=function(e,r){r=o.$(r);var t,n,i,a,c,u=0;for(n=0,a=0,i=e.length;i>n;++n)c=r?r(e[n]):e[n],o.isValid(c)&&(t=c-u,u+=t/++a);return u},s.mean.geometric=function(e,r){r=o.$(r);var t,n,i,a,c=1;for(a=0,t=0,n=e.length;n>a;++a)if(i=r?r(e[a]):e[a],o.isValid(i)){if(0>=i)throw Error("Geometric mean only defined for positive values.");c*=i,++t}return c=t>0?Math.pow(c,1/t):0},s.mean.harmonic=function(e,r){r=o.$(r);var t,n,i,a,c=0;for(a=0,t=0,n=e.length;n>a;++a)i=r?r(e[a]):e[a],o.isValid(i)&&(c+=1/i,++t);return t/c},s.variance=function(e,r){if(r=o.$(r),!o.isArray(e)||e.length<2)return 0;var t,n,i,a,c=0,u=0;for(n=0,i=0;n<e.length;++n)a=r?r(e[n]):e[n],o.isValid(a)&&(t=a-c,c+=t/++i,u+=t*(a-c));return u/=i-1},s.stdev=function(e,r){return Math.sqrt(s.variance(e,r))},s.modeskew=function(e,r){var t=s.mean(e,r),n=s.median(e,r),i=s.stdev(e,r);return 0===i?0:(t-n)/i},s.min=function(e,r){return s.extent(e,r)[0]},s.max=function(e,r){return s.extent(e,r)[1]},s.extent=function(e,r){r=o.$(r);var t,n,i,a,c=e.length;for(a=0;c>a;++a)if(i=r?r(e[a]):e[a],o.isValid(i)){t=n=i;break}for(;c>a;++a)i=r?r(e[a]):e[a],o.isValid(i)&&(t>i&&(t=i),i>n&&(n=i));return[t,n]},s.extent.index=function(e,r){r=o.$(r);var t,n,i,a,c=-1,u=-1,s=e.length;for(a=0;s>a;++a)if(i=r?r(e[a]):e[a],o.isValid(i)){t=n=i,c=u=a;break}for(;s>a;++a)i=r?r(e[a]):e[a],o.isValid(i)&&(t>i&&(t=i,c=a),i>n&&(n=i,u=a));return[c,u]},s.dot=function(e,r,t){var n,i,a=0;if(t)for(r=o.$(r),t=o.$(t),n=0;n<e.length;++n)i=r(e[n])*t(e[n]),i===i&&(a+=i);else{if(e.length!==r.length)throw Error("Array lengths must match.");for(n=0;n<e.length;++n)i=e[n]*r[n],i===i&&(a+=i)}return a},s.dist=function(e,r,t,n){var i,a,c=o.isFunction(t)||o.isString(t),u=e,s=c?e:r,l=c?n:t,p=2===l||null==l,E=e.length,f=0;for(c&&(r=o.$(r),t=o.$(t)),a=0;E>a;++a)i=c?r(u[a])-t(s[a]):u[a]-s[a],f+=p?i*i:Math.pow(Math.abs(i),l);return p?Math.sqrt(f):Math.pow(f,1/l)},s.cohensd=function(e,r,t){var n=t?e.map(o.$(r)):e,i=t?e.map(o.$(t)):r,a=s.mean(n),c=s.mean(i),u=s.count.valid(n),l=s.count.valid(i);if(0>=u+l-2)return 0;var p=s.variance(n),E=s.variance(i),f=Math.sqrt(((u-1)*p+(l-1)*E)/(u+l-2));return 0===f?0:(a-c)/f},s.covariance=function(e,r,t){var n,i,a,c,u,l=t?e.map(o.$(r)):e,p=t?e.map(o.$(t)):r,E=l.length,f=s.mean(l),T=s.mean(p),S=0,d=0;if(E!==p.length)throw Error("Input lengths must match.");for(n=0;E>n;++n)if(i=l[n],c=o.isValid(i),a=p[n],u=o.isValid(a),c&&u)S+=(i-f)*(a-T),++d;else if(c||u)throw Error("Valid values must align.");return S/(d-1)},s.rank=function(e,r){r=o.$(r)||o.identity;var t,n,i,a=e.map(function(e,t){return{idx:t,val:r(e)}}).sort(o.comparator("val")),c=e.length,u=Array(c),s=-1,l={};for(t=0;c>t;++t){if(n=a[t].val,0>s&&l===n)s=t-1;else if(s>-1&&l!==n){for(i=1+(t-1+s)/2;t>s;++s)u[a[s].idx]=i;s=-1}u[a[t].idx]=t+1,l=n}if(s>-1)for(i=1+(c-1+s)/2;c>s;++s)u[a[s].idx]=i;return u},s.cor=function(e,r,t){var n=t;t=n?e.map(o.$(t)):r,r=n?e.map(o.$(r)):e;var i=s.dot(r,t),a=s.mean(r),c=s.mean(t),u=s.stdev(r),l=s.stdev(t),p=e.length;return(i-p*a*c)/((p-1)*u*l)},s.cor.rank=function(e,r,t){var n,i,a,o=t?s.rank(e,r):s.rank(e),c=t?s.rank(e,t):s.rank(r),u=e.length;for(n=0,i=0;u>n;++n)a=o[n]-c[n],i+=a*a;return 1-6*i/(u*(u*u-1))},s.cor.dist=function(e,r,t){var n,i,a,c,u=t?e.map(o.$(r)):e,l=t?e.map(o.$(t)):r,p=s.dist.mat(u),E=s.dist.mat(l),f=p.length;for(n=0,i=0,a=0,c=0;f>n;++n)i+=p[n]*p[n],a+=E[n]*E[n],c+=p[n]*E[n];return Math.sqrt(c/Math.sqrt(i*a))},s.linearRegression=function(e,r,t){var n,i,a=t?e.map(o.$(r)):e,c=t?e.map(o.$(t)):r,u=a.length,l=s.covariance(a,c),p=s.stdev(a),E=s.stdev(c),f=l/(p*p),T=s.mean(c)-f*s.mean(a),S={slope:f,intercept:T,R:l/(p*E),rss:0};for(i=0;u>i;++i)o.isValid(a[i])&&o.isValid(c[i])&&(n=f*a[i]+T-c[i],S.rss+=n*n);return S},s.bootstrap={},s.bootstrap.ci=function(e,r,t,n,i){var a,c,l,p,E,f,T;for(o.isFunction(r)||o.isString(r)?(a=e.map(o.$(r)),c=t,l=n,p=i):(a=e,c=r,l=t,p=n),c=c?+c:1e3,l=l||.05,E=u.random.bootstrap(a,p),T=0,f=Array(c);c>T;++T)f[T]=s.mean(E.samples(a.length));return f.sort(o.numcmp),[s.quantile(f,l/2),s.quantile(f,1-l/2)]},s.z={},s.z.ci=function(e,r,t){var n=e,i=r;(o.isFunction(r)||o.isString(r))&&(n=e.map(o.$(r)),i=t),i=i||.05;var a=.05===i?1.96:u.random.normal(0,1).icdf(1-i/2),c=s.mean(n),l=s.stdev(n)/Math.sqrt(s.count.valid(n));return[c-a*l,c+a*l]},s.z.test=function(e,r,t,c){return o.isFunction(t)||o.isString(t)?(c&&c.paired?i:a)(c,e,r,t):o.isArray(r)?(t&&t.paired?i:a)(t,e,r):o.isFunction(r)||o.isString(r)?n(t,e,r):n(r,e)},s.dist.mat=function(e){var r,t,n,i=e.length,a=i*i,o=Array(a),c=u.zeros(i),s=0;for(t=0;i>t;++t)for(o[t*i+t]=0,n=t+1;i>n;++n)o[t*i+n]=r=Math.abs(e[t]-e[n]),o[n*i+t]=r,c[t]+=r,c[n]+=r;for(t=0;i>t;++t)s+=c[t],c[t]/=i;for(s/=a,t=0;i>t;++t)for(n=t;i>n;++n)o[t*i+n]+=s-c[t]-c[n],o[n*i+t]=o[t*i+n];return o},s.entropy=function(e,r){r=o.$(r);var t,n,i=0,a=0,c=e.length;for(t=0;c>t;++t)i+=r?r(e[t]):e[t];if(0===i)return 0;for(t=0;c>t;++t)n=(r?r(e[t]):e[t])/i,n&&(a+=n*Math.log(n));return-a/Math.LN2},s.mutual=function(e,r,t,n){var i,a,c,u=n?e.map(o.$(r)):e,s=n?e.map(o.$(t)):r,l=n?e.map(o.$(n)):t,p={},E={},f=l.length,T=0,S=0,d=0;for(c=0;f>c;++c)p[u[c]]=0,E[s[c]]=0;for(c=0;f>c;++c)p[u[c]]+=l[c],E[s[c]]+=l[c],T+=l[c];for(a=1/(T*Math.LN2),c=0;f>c;++c)0!==l[c]&&(i=T*l[c]/(p[u[c]]*E[s[c]]),S+=l[c]*a*Math.log(i),d+=l[c]*a*Math.log(l[c]/T));return[S,1+S/d]},s.mutual.info=function(e,r,t,n){return s.mutual(e,r,t,n)[0]},s.mutual.dist=function(e,r,t,n){return s.mutual(e,r,t,n)[1]},s.profile=function(e,r){var t,n,i,a,u,l=0,p=0,E=0,f=0,T=null,S=null,d=0,A=[],y={};for(i=0;i<e.length;++i)a=r?r(e[i]):e[i],y[a]=a in y?y[a]+1:(f+=1,1),null==a?++E:o.isValid(a)&&(u="string"==typeof a?a.length:a,(null===T||T>u)&&(T=u),(null===S||u>S)&&(S=u),t=u-l,l+=t/++p,d+=t*(u-l),A.push(u));return d/=p-1,n=Math.sqrt(d),A.sort(o.cmp),{type:c(e,r),unique:y,count:e.length,valid:p,missing:E,distinct:f,min:T,max:S,mean:l,stdev:n,median:a=s.quantile(A,.5),q1:s.quantile(A,.25),q3:s.quantile(A,.75),modeskew:0===n?0:(l-a)/n}},s.summary=function(e,r){r=r||o.keys(e[0]);var t=r.map(function(r){var t=s.profile(e,o.$(r));return t.field=r,t});return t.__summary__=!0,t}},{"./generate":4,"./import/type":5,"./util":8}],7:[function(e,r,t){function n(e){return s.setTime(+e),s}function i(e,r,t,n,i,a){var o={type:e,date:r,unit:t};return n?o.step=n:o.minstep=1,null!=i&&(o.min=i),null!=a&&(o.max=a),o}function a(e,r,t,n,a,o){return i(e,function(e){return r.offset(t,e)},function(e){return r.count(t,e)},n,a,o)}function o(e,r,t,n){var i,a,o,c=T[0];for(i=1,a=T.length;a>i;++i)if(c=T[i],r>c[0]){if(o=r/c[0],o>n)return e[T[i-1][1]];if(o>=t)return e[c[1]]}return e[T[a-1][1]]}function c(e){var r,t,n={};for(r=0,t=e.length;t>r;++r)n[e[r].type]=e[r];return n.find=function(r,t,n){return o(e,r,t,n)},n}var u=e("d3-time"),s=new Date,l=new Date(0,0,1).setFullYear(0),p=new Date(Date.UTC(0,0,1)).setUTCFullYear(0),E=[a("second",u.second,l),a("minute",u.minute,l),a("hour",u.hour,l),a("day",u.day,l,[1,7]),a("month",u.month,l,[1,3,6]),a("year",u.year,l),i("seconds",function(e){return new Date(1970,0,1,0,0,e)},function(e){return n(e).getSeconds()},null,0,59),i("minutes",function(e){return new Date(1970,0,1,0,e)},function(e){return n(e).getMinutes()},null,0,59),i("hours",function(e){return new Date(1970,0,1,e)},function(e){return n(e).getHours()},null,0,23),i("weekdays",function(e){return new Date(1970,0,4+e)},function(e){return n(e).getDay()},[1],0,6),i("dates",function(e){return new Date(1970,0,e)},function(e){return n(e).getDate()},[1],1,31),i("months",function(e){return new Date(1970,e%12,1)},function(e){return n(e).getMonth()},[1],0,11)],f=[a("second",u.utcSecond,p),a("minute",u.utcMinute,p),a("hour",u.utcHour,p),a("day",u.utcDay,p,[1,7]),a("month",u.utcMonth,p,[1,3,6]),a("year",u.utcYear,p),i("seconds",function(e){return new Date(Date.UTC(1970,0,1,0,0,e))},function(e){return n(e).getUTCSeconds()},null,0,59),i("minutes",function(e){return new Date(Date.UTC(1970,0,1,0,e))},function(e){return n(e).getUTCMinutes()},null,0,59),i("hours",function(e){return new Date(Date.UTC(1970,0,1,e))},function(e){return n(e).getUTCHours()},null,0,23),i("weekdays",function(e){return new Date(Date.UTC(1970,0,4+e))},function(e){return n(e).getUTCDay()},[1],0,6),i("dates",function(e){return new Date(Date.UTC(1970,0,e))},function(e){return n(e).getUTCDate()},[1],1,31),i("months",function(e){return new Date(Date.UTC(1970,e%12,1))},function(e){return n(e).getUTCMonth()},[1],0,11)],T=[[31536e6,5],[7776e6,4],[2592e6,4],[12096e5,3],[6048e5,3],[1728e5,3],[864e5,3],[432e5,2],[216e5,2],[108e5,2],[36e5,2],[18e5,1],[9e5,1],[3e5,1],[6e4,1],[3e4,0],[15e3,0],[5e3,0],[1e3,0]];r.exports=c(E),r.exports.utc=c(f)},{"d3-time":2}],8:[function(e,r,t){(function(e){function t(e,r){var t,n="";for(t=0;e>t;++t)n+=r;return n}function n(e,r,t){var n=0,i=e.split(u);return e=t?(i=i.reverse()).filter(function(e){return n+=e.length,r>=n}).reverse():i.filter(function(e){return n+=e.length,r>=n}),e.length?e.join("").trim():i[0].slice(0,r)}var i=r.exports,a="__name__";i.namedfunc=function(e,r){return r[a]=e,r},i.name=function(e){return null==e?null:e[a]},i.identity=function(e){return e},i["true"]=i.namedfunc("true",function(){return!0}),i["false"]=i.namedfunc("false",function(){return!1}),i.duplicate=function(e){return JSON.parse(JSON.stringify(e))},i.equal=function(e,r){return JSON.stringify(e)===JSON.stringify(r)},i.extend=function(e){for(var r,t,n=1,i=arguments.length;i>n;++n){r=arguments[n];for(t in r)e[t]=r[t]}return e},i.length=function(e){return null!=e&&null!=e.length?e.length:null},i.keys=function(e){var r,t=[];for(r in e)t.push(r);return t},i.vals=function(e){var r,t=[];for(r in e)t.push(e[r]);return t},i.toMap=function(e,r){return(r=i.$(r))?e.reduce(function(e,t){return e[r(t)]=1,e},{}):e.reduce(function(e,r){return e[r]=1,e},{})},i.keystr=function(e){var r=e.length;if(!r)return"";for(var t=String(e[0]),n=1;r>n;++n)t+="|"+String(e[n]);return t};var o=Object.prototype.toString;i.isObject=function(e){return e===Object(e)},i.isFunction=function(e){return"[object Function]"===o.call(e)},i.isString=function(e){return"string"==typeof value||"[object String]"===o.call(e)},i.isArray=Array.isArray||function(e){return"[object Array]"===o.call(e)},i.isNumber=function(e){return"number"==typeof e||"[object Number]"===o.call(e)},i.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==o.call(e)},i.isDate=function(e){return"[object Date]"===o.call(e)},i.isValid=function(e){return null!=e&&e===e},i.isBuffer="function"==typeof e&&e.isBuffer||i["false"],i.number=function(e){return null==e||""===e?null:+e},i["boolean"]=function(e){return null==e||""===e?null:"false"===e?!1:!!e},i.date=function(e,r){var t=r?r:Date;return null==e||""===e?null:t.parse(e)},i.array=function(e){return null!=e?i.isArray(e)?e:[e]:[]},i.str=function(e){return i.isArray(e)?"["+e.map(i.str)+"]":i.isObject(e)||i.isString(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e};var c=/\[(.*?)\]|[^.\[]+/g;i.field=function(e){return String(e).match(c).map(function(e){return"["!==e[0]?e:"'"!==e[1]&&'"'!==e[1]?e.slice(1,-1):e.slice(2,-2).replace(/\\(["'])/g,"$1")})},i.accessor=function(e){return null==e||i.isFunction(e)?e:i.namedfunc(e,Function("x","return x["+i.field(e).map(i.str).join("][")+"];"))},i.$=i.accessor,i.mutator=function(e){var r;return i.isString(e)&&(r=i.field(e)).length>1?function(e,t){for(var n=0;n<r.length-1;++n)e=e[r[n]];e[r[n]]=t}:function(r,t){r[e]=t}},i.$func=function(e,r){return function(t){t=i.$(t)||i.identity;var n=e+(i.name(t)?"_"+i.name(t):"");return i.namedfunc(n,function(e){return r(t(e))})}},i.$valid=i.$func("valid",i.isValid),i.$length=i.$func("length",i.length),i.$in=function(e,r){e=i.$(e);var t=i.isArray(r)?i.toMap(r):r;return function(r){return!!t[e(r)]}},i.comparator=function(e){var r=[];return void 0===e&&(e=[]),e=i.array(e).map(function(e){var t=1;return"-"===e[0]?(t=-1,e=e.slice(1)):"+"===e[0]&&(t=1,e=e.slice(1)),r.push(t),i.accessor(e)}),function(t,n){var i,a,o,c,u;for(i=0,a=e.length;a>i;++i){if(o=e[i],c=o(t),u=o(n),u>c)return-1*r[i];if(c>u)return r[i]}return 0}},i.cmp=function(e,r){return r>e?-1:e>r?1:e>=r?0:null===e?-1:null===r?1:NaN},i.numcmp=function(e,r){return e-r},i.stablesort=function(e,r,t){var n=e.reduce(function(e,r,n){return e[t(r)]=n,e},{});return e.sort(function(e,i){var a=r(e),o=r(i);return o>a?-1:a>o?1:n[t(e)]-n[t(i)]}),e},i.permute=function(e){for(var r,t,n=e.length;n;)t=Math.floor(Math.random()*n--),r=e[n],e[n]=e[t],e[t]=r},i.pad=function(e,r,n,i){i=i||" ";var a=r-e.length;if(0>=a)return e;switch(n){case"left":return t(a,i)+e;case"middle":case"center":return t(Math.floor(a/2),i)+e+t(Math.ceil(a/2),i);default:return e+t(a,i)}},i.truncate=function(e,r,t,i,a){var o=e.length;if(r>=o)return e;a=void 0!==a?String(a):"â€¦";var c=Math.max(0,r-a.length);switch(t){case"left":return a+(i?n(e,c,1):e.slice(o-c));case"middle":case"center":var u=Math.ceil(c/2),s=Math.floor(c/2);return(i?n(e,u):e.slice(0,u))+a+(i?n(e,s,1):e.slice(o-s));default:return(i?n(e,c):e.slice(0,c))+a}};var u=/([\u0009\u000A\u000B\u000C\u000D\u0020\u00A0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u2028\u2029\u3000\uFEFF])/}).call(this,e("buffer").Buffer)},{buffer:1}],9:[function(e,r,t){"use strict";var n=e("vega-lite/src/channel"),i=e("vega-lite/src/aggregate"),a=e("vega-lite/src/mark"),o=e("vega-lite/src/scale"),c=e("vega-lite/src/sort"),u=e("vega-lite/src/timeunit"),s=e("vega-lite/src/type"),l=e("./property");t.DEFAULT_QUERY_CONFIG={verbose:!1,defaultSpecConfig:{overlay:{line:!0},scale:{useRawDomain:!0}},propertyPrecedence:l.DEFAULT_PROPERTY_PRECEDENCE,marks:[a.Mark.POINT,a.Mark.BAR,a.Mark.LINE,a.Mark.AREA,a.Mark.TICK],channels:[n.X,n.Y,n.ROW,n.COLUMN,n.SIZE,n.COLOR],aggregates:[void 0,i.AggregateOp.MEAN],timeUnits:[void 0,u.TimeUnit.YEAR,u.TimeUnit.MONTH,u.TimeUnit.DATE,u.TimeUnit.MINUTES,u.TimeUnit.SECONDS],types:[s.Type.NOMINAL,s.Type.ORDINAL,s.Type.QUANTITATIVE,s.Type.TEMPORAL],maxBinsList:[5,10,20],axisAxisColors:[void 0],axisAxisWidths:[void 0],axisLayers:["front","back"],axisOffsets:[void 0],axisOrients:[void 0],axisGridColors:[void 0],axisGridDashes:[void 0],axisGridOpacities:[void 0],axisGridWidths:[void 0],axisFormats:[void 0],axisLabelAngles:[void 0],axisLabelMaxLengths:[void 0],axisSubDivides:[void 0],axisTicks:[void 0],axisTickColors:[void 0],axisTickLabelColors:[void 0],axisTickLabelFonts:[void 0],axisTickLabelFontSizes:[void 0],axisTickPaddings:[void 0],axisTickSizes:[void 0],axisTickSizeMajors:[void 0],axisTickSizeMinors:[void 0],axisTickSizeEnds:[void 0],axisTickWidths:[void 0],axisValuesList:[void 0],axisTitles:[void 0],axisTitleColors:[void 0],axisTitleFonts:[void 0],axisTitleFontWeights:[void 0],axisTitleFontSizes:[void 0],axisTitleOffsets:[void 0],axisTitleMaxLengths:[void 0],axisCharacterWidths:[void 0],legendOrients:["left","right"],legendOffsets:[void 0],legendValuesList:[void 0],legendFormats:[void 0],legendLabelAligns:[void 0],legendLabelBaselines:[void 0],legendLabelColors:[void 0],legendLabelFonts:[void 0],legendLabelFontSizes:[void 0],legendSymbolColors:[void 0],legendSymbolShapes:[void 0],legendSymbolSizes:[void 0],legendSymbolStrokeWidths:[void 0],legendTitles:[void 0],legendTitleColors:[void 0],legendTitleFonts:[void 0],legendTitleFontSizes:[void 0],legendTitleFontWeights:[void 0],sorts:[c.SortOrder.ASCENDING,c.SortOrder.DESCENDING],sortOps:[i.AggregateOp.MIN,i.AggregateOp.MEAN],sortOrders:[c.SortOrder.ASCENDING,c.SortOrder.DESCENDING],scaleBandSizes:[17,21],scaleDomains:[void 0],scaleExponents:[1],scaleRanges:[void 0],scaleTypes:[void 0,o.ScaleType.LOG],numberNominalProportion:.05,numberNominalLimit:40,constraintManuallySpecifiedValue:!1,autoAddCount:!1,hasAppropriateGraphicTypeForMark:!0,omitAggregate:!1,omitAggregatePlotWithDimensionOnlyOnFacet:!0,omitAggregatePlotWithoutDimension:!1,omitBarLineAreaWithOcclusion:!0,omitBarTickWithSize:!0,omitMultipleNonPositionalChannels:!0,omitNonSumStack:!0,omitRaw:!1,omitRawContinuousFieldForAggregatePlot:!0,omitRepeatedField:!0,omitNonPositionalOrFacetOverPositionalChannels:!0,omitTableWithOcclusionIfAutoAddCount:!0,omitVerticalDotPlot:!1,preferredBinAxis:n.Channel.X,preferredTemporalAxis:n.Channel.X,preferredOrdinalAxis:n.Channel.Y,preferredNominalAxis:n.Channel.Y,preferredFacet:n.Channel.ROW,maxCardinalityForCategoricalColor:20,maxCardinalityForFacet:20,maxCardinalityForShape:6,timeUnitShouldHaveVariation:!0,typeMatchesSchemaType:!0,stylize:!0,smallBandSizeForHighCardinalityOrFacet:{maxCardinality:10,bandSize:12},nominalColorScaleForHighCardinality:{maxCardinality:10,palette:"category20"},xAxisOnTopForHighYCardinalityWithoutColumn:{maxCardinality:30},maxGoodCardinalityForFacet:5,maxGoodCardinalityForColor:7}},{"./property":21,"vega-lite/src/aggregate":43,"vega-lite/src/channel":46,"vega-lite/src/mark":49,"vega-lite/src/scale":50,"vega-lite/src/sort":51,"vega-lite/src/timeunit":53,"vega-lite/src/type":54}],10:[function(e,r,t){"use strict";var n=function(){function e(e){this.constraint=e}return e.prototype.name=function(){return this.constraint.name},e.prototype.description=function(){return this.constraint.description},e.prototype.properties=function(){return this.constraint.properties},e.prototype.strict=function(){return this.constraint.strict},e}();t.AbstractConstraintModel=n},{}],11:[function(e,r,t){"use strict";var n=e("./encoding"),i=e("./spec");t.encoding=n,t.spec=i},{"./encoding":12,"./spec":13}],12:[function(e,r,t){"use strict";function n(e,r,n,i,a,o){for(var c=t.ENCODING_CONSTRAINTS_BY_PROPERTY[e]||[],u=i.getEncodingQueryByIndex(n),s=0;s<c.length;s++){var l=c[s];if(l.strict()||o[l.name()]){var p=l.satisfy(u,a,i.enumSpecIndex.encodings[n],o);if(!p){var E="(enc) "+l.name();return o.verbose&&console.log(E+" failed with "+i.toShorthand()+" for "+r.name),E}}}return null}var i=this&&this.__extends||function(e,r){function t(){this.constructor=e}for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n]);e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)},a=e("vega-lite/src/aggregate"),o=e("vega-lite/src/channel"),c=e("vega-lite/src/scale"),u=e("vega-lite/src/type"),s=e("./base"),l=e("../property"),p=e("../enumspec"),E=e("../schema"),f=e("../util"),T=e("../query/encoding"),S=function(e){function r(r){e.call(this,r)}return i(r,e),r.prototype.hasAllRequiredPropertiesSpecific=function(e){return f.every(this.constraint.properties,function(r){var t=l.getNestedEncodingProperty(r);if(t){var n=t.parent,i=t.child;return e[n]?!p.isEnumSpec(e[n][i]):!0}return e[r]?!p.isEnumSpec(e[r]):!0})},r.prototype.satisfy=function(e,r,t,n){return this.constraint.allowEnumSpecForProperties||this.hasAllRequiredPropertiesSpecific(e)?this.constraint.satisfy(e,r,t,n):!0},r}(s.AbstractConstraintModel);t.EncodingConstraintModel=S,t.ENCODING_CONSTRAINTS=[{name:"aggregateOpSupportedByType",description:"Aggregate function should be supported by data type.",properties:[l.Property.TYPE,l.Property.AGGREGATE],allowEnumSpecForProperties:!1,strict:!0,satisfy:function(e,r,t,n){return e.aggregate?e.type!==u.Type.ORDINAL&&e.type!==u.Type.NOMINAL:!0}},{name:"asteriskFieldWithCountOnly",description:'Field="*" should be disallowed except aggregate="count"',properties:[l.Property.FIELD,l.Property.AGGREGATE],
allowEnumSpecForProperties:!1,strict:!0,satisfy:function(e,r,t,n){return"*"===e.field==(e.aggregate===a.AggregateOp.COUNT)}},{name:"binAppliedForQuantitative",description:"bin should be applied to quantitative field only.",properties:[l.Property.TYPE,l.Property.BIN],allowEnumSpecForProperties:!1,strict:!0,satisfy:function(e,r,t,n){return e.bin?e.type===u.Type.QUANTITATIVE:!0}},{name:"channelSupportsRole",description:"encoding channel should support the role of the field",properties:[l.Property.CHANNEL,l.Property.TYPE,l.Property.BIN,l.Property.TIMEUNIT],allowEnumSpecForProperties:!0,strict:!0,satisfy:function(e,r,t,n){if(p.isEnumSpec(e.channel))return!0;if(!t.channel&&!n.constraintManuallySpecifiedValue)return!0;var i=o.getSupportedRole(e.channel);return T.isDimension(e)?i.dimension:T.isMeasure(e)?i.measure:!0}},{name:"hasFn",description:"A field with as hasFn flag should have one of aggregate, timeUnit, or bin.",properties:[l.Property.AGGREGATE,l.Property.BIN,l.Property.TIMEUNIT],allowEnumSpecForProperties:!0,strict:!0,satisfy:function(e,r,t,n){return e.hasFn?!!e.aggregate||!!e.bin||!!e.timeUnit:!0}},{name:"omitScaleZeroWithBinnedField",description:"Do not use scale zero with binned field",properties:[l.Property.SCALE,l.Property.SCALE_ZERO,l.Property.BIN],allowEnumSpecForProperties:!1,strict:!0,satisfy:function(e,r,t,n){return!e.bin||!e.scale||e.scale.zero!==!0}},{name:"onlyOneTypeOfFunction",description:"Only of of aggregate, autoCount, timeUnit, or bin should be applied at the same time.",properties:[l.Property.AGGREGATE,l.Property.AUTOCOUNT,l.Property.TIMEUNIT,l.Property.BIN],allowEnumSpecForProperties:!0,strict:!0,satisfy:function(e,r,t,n){var i=(!p.isEnumSpec(e.aggregate)&&e.aggregate?1:0)+(!p.isEnumSpec(e.autoCount)&&e.autoCount?1:0)+(!p.isEnumSpec(e.bin)&&e.bin?1:0)+(!p.isEnumSpec(e.timeUnit)&&e.timeUnit?1:0);return 1>=i}},{name:"timeUnitAppliedForTemporal",description:"Time unit should be applied to temporal field only.",properties:[l.Property.TYPE,l.Property.TIMEUNIT],allowEnumSpecForProperties:!1,strict:!0,satisfy:function(e,r,t,n){return!e.timeUnit||e.type===u.Type.TEMPORAL}},{name:"timeUnitShouldHaveVariation",description:"A particular time unit should be applied only if they produce unique values.",properties:[l.Property.TIMEUNIT,l.Property.TYPE],allowEnumSpecForProperties:!1,strict:!1,satisfy:function(e,r,t,n){return e.timeUnit&&e.type===u.Type.TEMPORAL&&(t.timeUnit||n.constraintManuallySpecifiedValue)?r.timeUnitHasVariation(e):!0}},{name:"scalePropertiesSupportedByScaleType",description:"Scale properties must be supported by correct scale type",properties:l.SCALE_PROPERTIES.concat([l.Property.SCALE,l.Property.TYPE]),allowEnumSpecForProperties:!0,strict:!0,satisfy:function(e,r,t,n){if(e.scale){var i=e.scale,a=T.scaleType(e);if(void 0===a)return!0;for(var o in i)if(l.SUPPORTED_SCALE_PROPERTY_INDEX[o]&&!f.contains(l.SUPPORTED_SCALE_PROPERTY_INDEX[o],a))return!1}return!0}},{name:"typeMatchesPrimitiveType",description:"Data type should be supported by field's primitive type.",properties:[l.Property.FIELD,l.Property.TYPE],allowEnumSpecForProperties:!1,strict:!0,satisfy:function(e,r,t,n){if("*"===e.field)return!0;var i=r.primitiveType(e.field),a=e.type;if(!t.field&&!t.type&&!n.constraintManuallySpecifiedValue)return!0;switch(i){case E.PrimitiveType.BOOLEAN:case E.PrimitiveType.STRING:return a!==u.Type.QUANTITATIVE&&a!==u.Type.TEMPORAL;case E.PrimitiveType.NUMBER:case E.PrimitiveType.INTEGER:return a!==u.Type.TEMPORAL;case E.PrimitiveType.DATE:return a===u.Type.TEMPORAL;case null:return!1}throw new Error("Not implemented")}},{name:"typeMatchesSchemaType",description:"Enumerated data type of a field should match the field's type in the schema.",properties:[l.Property.FIELD,l.Property.TYPE],allowEnumSpecForProperties:!1,strict:!1,satisfy:function(e,r,t,n){return t.field||t.type||n.constraintManuallySpecifiedValue?"*"===e.field?e.type===u.Type.QUANTITATIVE:r.type(e.field)===e.type:!0}},{name:"maxCardinalityForCategoricalColor",description:"Categorical channel should not have too high cardinality",properties:[l.Property.CHANNEL,l.Property.FIELD],allowEnumSpecForProperties:!1,strict:!1,satisfy:function(e,r,t,n){return e.channel===o.Channel.COLOR&&e.type===u.Type.NOMINAL?r.cardinality(e)<=n.maxCardinalityForCategoricalColor:!0}},{name:"maxCardinalityForFacet",description:"Row/column channel should not have too high cardinality",properties:[l.Property.CHANNEL,l.Property.FIELD,l.Property.BIN,l.Property.TIMEUNIT],allowEnumSpecForProperties:!1,strict:!1,satisfy:function(e,r,t,n){return e.channel===o.Channel.ROW||e.channel===o.Channel.COLUMN?r.cardinality(e)<=n.maxCardinalityForFacet:!0}},{name:"maxCardinalityForShape",description:"Shape channel should not have too high cardinality",properties:[l.Property.CHANNEL,l.Property.FIELD,l.Property.BIN,l.Property.TIMEUNIT],allowEnumSpecForProperties:!1,strict:!1,satisfy:function(e,r,t,n){return e.channel===o.Channel.SHAPE?r.cardinality(e)<=n.maxCardinalityForShape:!0}},{name:"dataTypeAndFunctionMatchScaleType",description:"Scale type must match data type",properties:[l.Property.TYPE,l.Property.SCALE,l.Property.SCALE_TYPE,l.Property.TIMEUNIT,l.Property.BIN],allowEnumSpecForProperties:!1,strict:!0,satisfy:function(e,r,t,n){if(e.scale){var i=e.type,a=T.scaleType(e);if(f.contains([u.Type.ORDINAL,u.Type.NOMINAL],i))return f.contains([c.ScaleType.ORDINAL,void 0],a);if(i===u.Type.TEMPORAL)return e.timeUnit?f.contains([c.ScaleType.TIME,c.ScaleType.UTC,c.ScaleType.ORDINAL,void 0],a):f.contains([c.ScaleType.TIME,c.ScaleType.UTC,void 0],a);if(i===u.Type.QUANTITATIVE)return e.bin?f.contains([c.ScaleType.LINEAR,void 0],a):f.contains([c.ScaleType.LOG,c.ScaleType.POW,c.ScaleType.SQRT,c.ScaleType.QUANTILE,c.ScaleType.QUANTIZE,c.ScaleType.LINEAR,void 0],a)}return!0}}].map(function(e){return new S(e)}),t.ENCODING_CONSTRAINT_INDEX=t.ENCODING_CONSTRAINTS.reduce(function(e,r){return e[r.name()]=r,e},{}),t.ENCODING_CONSTRAINTS_BY_PROPERTY=t.ENCODING_CONSTRAINTS.reduce(function(e,r){return r.properties().forEach(function(t){e[t]=e[t]||[],e[t].push(r)}),e},{}),t.checkEncoding=n},{"../enumspec":16,"../property":21,"../query/encoding":22,"../schema":35,"../util":37,"./base":10,"vega-lite/src/aggregate":43,"vega-lite/src/channel":46,"vega-lite/src/scale":50,"vega-lite/src/type":54}],13:[function(e,r,t){"use strict";function n(e,r,n,i,a){for(var o=t.SPEC_CONSTRAINTS_BY_PROPERTY[e]||[],c=0;c<o.length;c++){var u=o[c];if(u.strict()||a[u.name()]){var s=u.satisfy(n,i,a);if(!s){var l="(spec) "+u.name();return a.verbose&&console.log(l+" failed with "+n.toShorthand()+" for "+r.name),l}}}return null}var i=this&&this.__extends||function(e,r){function t(){this.constructor=e}for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n]);e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)},a=e("vega-lite/src/aggregate"),o=e("vega-lite/src/channel"),c=e("vega-lite/src/mark"),u=e("vega-lite/src/scale"),s=e("vega-lite/src/type"),l=e("./base"),p=e("../enumspec"),E=e("../property"),f=e("../query/encoding"),T=e("../util"),S=e("../query/encoding"),d=o.NONSPATIAL_CHANNELS.reduce(function(e,r){return e[r]=!0,e},{}),A=function(e){function r(r){e.call(this,r)}return i(r,e),r.prototype.hasAllRequiredPropertiesSpecific=function(e){return T.every(this.constraint.properties,function(r){if(r===E.Property.MARK)return!p.isEnumSpec(e.getMark());var t=E.getNestedEncodingProperty(r);if(t){var n=t.parent,i=t.child;return T.every(e.getEncodings(),function(e){return e[n]?!p.isEnumSpec(e[n][i]):!0})}if(!E.isEncodingProperty(r))throw new Error("UNIMPLEMENTED");return T.every(e.getEncodings(),function(e){return e[r]?!p.isEnumSpec(e[r]):!0})})},r.prototype.satisfy=function(e,r,t){return this.constraint.allowEnumSpecForProperties||this.hasAllRequiredPropertiesSpecific(e)?this.constraint.satisfy(e,r,t):!0},r}(l.AbstractConstraintModel);t.SpecConstraintModel=A,t.SPEC_CONSTRAINTS=[{name:"noRepeatedChannel",description:"Each encoding channel should only be used once.",properties:[E.Property.CHANNEL],allowEnumSpecForProperties:!0,strict:!0,satisfy:function(e,r,t){var n={};return T.every(e.getEncodings(),function(e){return p.isEnumSpec(e.channel)?!0:n[e.channel]?!1:(n[e.channel]=!0,!0)})}},{name:"alwaysIncludeZeroInScaleWithBarMark",description:"Do not recommend bar mark if scale does not start at zero",properties:[E.Property.MARK,E.Property.SCALE,E.Property.SCALE_ZERO,E.Property.CHANNEL,E.Property.TYPE],allowEnumSpecForProperties:!1,strict:!0,satisfy:function(e,r,t){var n=e.getMark(),i=e.getEncodings();if(n===c.Mark.BAR)for(var a=0,u=i;a<u.length;a++){var l=u[a];if((l.channel===o.Channel.X||l.channel===o.Channel.Y)&&l.type===s.Type.QUANTITATIVE&&l.scale&&l.scale.zero===!1)return!1}return!0}},{name:"autoAddCount",description:"Automatically adding count only for plots with only ordinal, binned quantitative, or temporal with timeunit fields.",properties:[E.Property.BIN,E.Property.TIMEUNIT,E.Property.TYPE,E.Property.AUTOCOUNT],allowEnumSpecForProperties:!0,strict:!1,satisfy:function(e,r,t){var n=T.some(e.getEncodings(),function(e){return e.autoCount===!0});if(n)return T.every(e.getEncodings(),function(e){if(void 0!==e.autoCount)return!0;switch(e.type){case s.Type.QUANTITATIVE:return!!e.bin;case s.Type.TEMPORAL:return!!e.timeUnit;case s.Type.ORDINAL:case s.Type.NOMINAL:return!0}throw new Error("Unsupported Type")});var i=T.every(e.enumSpecIndex.encodingIndicesByProperty.autoCount,function(r){return!p.isEnumSpec(e.getEncodingQueryByIndex(r).autoCount)});return i?T.some(e.getEncodings(),function(e){return e.type===s.Type.QUANTITATIVE?e.autoCount===!1?!1:!e.bin||p.isEnumSpec(e.bin):e.type===s.Type.TEMPORAL?!e.timeUnit||p.isEnumSpec(e.timeUnit):!1}):!0}},{name:"channelPermittedByMarkType",description:"Each encoding channel should be supported by the mark type",properties:[E.Property.CHANNEL,E.Property.MARK],allowEnumSpecForProperties:!0,strict:!0,satisfy:function(e,r,t){var n=e.getMark();return p.isEnumSpec(n)?!0:T.every(e.getEncodings(),function(e){return p.isEnumSpec(e.channel)?!0:o.supportMark(e.channel,n)})}},{name:"hasAllRequiredChannelsForMark",description:"All required channels for the specified mark should be specified",properties:[E.Property.CHANNEL,E.Property.MARK],allowEnumSpecForProperties:!1,strict:!0,satisfy:function(e,r,t){var n=e.getMark();switch(n){case c.Mark.AREA:case c.Mark.LINE:return e.channelUsed(o.Channel.X)&&e.channelUsed(o.Channel.Y);case c.Mark.TEXT:return e.channelUsed(o.Channel.TEXT);case c.Mark.BAR:case c.Mark.CIRCLE:case c.Mark.SQUARE:case c.Mark.TICK:case c.Mark.RULE:return e.channelUsed(o.Channel.X)||e.channelUsed(o.Channel.Y);case c.Mark.POINT:return!e.enumSpecIndex.hasProperty(E.Property.CHANNEL)||e.channelUsed(o.Channel.X)||e.channelUsed(o.Channel.Y)}throw new Error("hasAllRequiredChannelsForMark not implemented for mark"+n)}},{name:"omitAggregate",description:"Omit aggregate plots.",properties:[E.Property.AGGREGATE,E.Property.AUTOCOUNT],allowEnumSpecForProperties:!0,strict:!1,satisfy:function(e,r,t){return!e.isAggregate()}},{name:"omitAggregatePlotWithDimensionOnlyOnFacet",description:"All required channels for the specified mark should be specified",properties:[E.Property.CHANNEL,E.Property.AGGREGATE,E.Property.AUTOCOUNT],allowEnumSpecForProperties:!1,strict:!1,satisfy:function(e,r,t){if(e.isAggregate()){var n=!1,i=!1,a=!1;if(e.specQuery.encodings.forEach(function(r,t){r.autoCount!==!1&&(r.aggregate||r.autoCount||(i=!0,T.contains([o.Channel.ROW,o.Channel.COLUMN],r.channel)?e.enumSpecIndex.hasEncodingProperty(t,E.Property.CHANNEL)&&(a=!0):n=!0))}),i&&!n&&(a||t.constraintManuallySpecifiedValue))return!1}return!0}},{name:"omitAggregatePlotWithoutDimension",description:"Aggregate plots without dimension should be omitted",properties:[E.Property.AGGREGATE,E.Property.AUTOCOUNT,E.Property.BIN,E.Property.TIMEUNIT,E.Property.TYPE],allowEnumSpecForProperties:!1,strict:!1,satisfy:function(e,r,t){return e.isAggregate()?T.some(e.getEncodings(),function(e){return!!f.isDimension(e)}):!0}},{name:"omitBarLineAreaWithOcclusion",description:"Don't use bar, line or area to visualize raw plot as they often lead to occlusion.",properties:[E.Property.MARK,E.Property.AGGREGATE,E.Property.AUTOCOUNT],allowEnumSpecForProperties:!1,strict:!1,satisfy:function(e,r,t){return T.contains([c.Mark.BAR,c.Mark.LINE,c.Mark.AREA],e.getMark())?e.isAggregate():!0}},{name:"omitBarTickWithSize",description:"Do not map field to size channel with bar and tick mark",properties:[E.Property.CHANNEL,E.Property.MARK],allowEnumSpecForProperties:!0,strict:!1,satisfy:function(e,r,t){var n=e.getMark();if(T.contains([c.Mark.TICK,c.Mark.BAR],n)&&e.channelUsed(o.Channel.SIZE)){if(t.constraintManuallySpecifiedValue)return!1;for(var i=e.specQuery.encodings,a=0;a<i.length;a++){var u=i[a];if(u.channel===o.Channel.SIZE)return!e.enumSpecIndex.hasEncodingProperty(a,E.Property.CHANNEL)}}return!0}},{name:"omitBarAreaForLogScale",description:"Do not use bar and area mark for x and y's log scale",properties:[E.Property.MARK,E.Property.CHANNEL,E.Property.SCALE,E.Property.SCALE_TYPE,E.Property.TYPE],allowEnumSpecForProperties:!1,strict:!0,satisfy:function(e,r,t){var n=e.getMark(),i=e.getEncodings();if(n===c.Mark.AREA||n===c.Mark.BAR)for(var a=0,s=i;a<s.length;a++){var l=s[a];if((l.channel===o.Channel.X||l.channel===o.Channel.Y)&&l.scale){var p=S.scaleType(l);if(p===u.ScaleType.LOG)return!1}}return!0}},{name:"omitMultipleNonPositionalChannels",description:"Unless manually specified, do not use multiple non-positional encoding channel to avoid over-encoding.",properties:[E.Property.CHANNEL],allowEnumSpecForProperties:!0,strict:!1,satisfy:function(e,r,t){for(var n=e.specQuery.encodings,i=0,a=!1,o=0;o<n.length;o++){var c=n[o];if(c.autoCount!==!1){var u=c.channel;if(!p.isEnumSpec(u)&&d[u]&&(i+=1,e.enumSpecIndex.hasEncodingProperty(o,E.Property.CHANNEL)&&(a=!0),i>1&&(a||t.constraintManuallySpecifiedValue)))return!1}}return!0}},{name:"omitNonPositionalOrFacetOverPositionalChannels",description:"Do not use non-positional channels unless all positional channels are used",properties:[E.Property.CHANNEL],allowEnumSpecForProperties:!1,strict:!1,satisfy:function(e,r,t){for(var n=e.specQuery.encodings,i=!1,a=!1,c=!1,u=!1,s=0;s<n.length;s++){var l=n[s];if(l.autoCount!==!1){var f=l.channel;f===o.Channel.X?c=!0:f===o.Channel.Y?u=!0:p.isEnumSpec(f)||(i=!0,e.enumSpecIndex.hasEncodingProperty(s,E.Property.CHANNEL)&&(a=!0))}}return a||t.constraintManuallySpecifiedValue&&i?c&&u:!0}},{name:"omitRaw",description:"Omit raw plots.",properties:[E.Property.AGGREGATE,E.Property.AUTOCOUNT],allowEnumSpecForProperties:!1,strict:!1,satisfy:function(e,r,t){return!!e.isAggregate()}},{name:"omitRawContinuousFieldForAggregatePlot",description:"Aggregate plot should not use raw continuous field as group by values. (Quantitative should be binned. Temporal should have time unit.)",properties:[E.Property.AGGREGATE,E.Property.AUTOCOUNT,E.Property.TIMEUNIT,E.Property.BIN,E.Property.TYPE],allowEnumSpecForProperties:!0,strict:!1,satisfy:function(e,r,t){if(e.isAggregate())for(var n=e.specQuery.encodings,i=0;i<n.length;i++){var a=n[i];if(a.autoCount!==!1){if(a.type===s.Type.TEMPORAL&&!a.timeUnit&&(e.enumSpecIndex.hasEncodingProperty(i,E.Property.TIMEUNIT)||t.constraintManuallySpecifiedValue))return!1;if(a.type===s.Type.QUANTITATIVE&&!a.bin&&!a.aggregate&&!a.autoCount){if(e.enumSpecIndex.hasEncodingProperty(i,E.Property.BIN)||e.enumSpecIndex.hasEncodingProperty(i,E.Property.AGGREGATE)||e.enumSpecIndex.hasEncodingProperty(i,E.Property.AUTOCOUNT))return!1;if(t.constraintManuallySpecifiedValue)return!1}}}return!0}},{name:"omitRawDetail",description:"Do not use detail channel with raw plot.",properties:[E.Property.CHANNEL,E.Property.AGGREGATE,E.Property.AUTOCOUNT],allowEnumSpecForProperties:!1,strict:!0,satisfy:function(e,r,t){return e.isAggregate()?!0:T.every(e.specQuery.encodings,function(r,n){return r.autoCount===!1?!0:r.channel!==o.Channel.DETAIL||!e.enumSpecIndex.hasEncodingProperty(n,E.Property.CHANNEL)&&!t.constraintManuallySpecifiedValue})}},{name:"omitRepeatedField",description:"Each field should be mapped to only one channel",properties:[E.Property.FIELD],allowEnumSpecForProperties:!0,strict:!1,satisfy:function(e,r,t){for(var n={},i={},a=e.specQuery.encodings,o=0;o<a.length;o++){var c=a[o];if(c.field&&!p.isEnumSpec(c.field)){var u=c.field;if(e.enumSpecIndex.hasEncodingProperty(o,E.Property.FIELD)&&(i[u]=!0),n[u]&&(i[u]||t.constraintManuallySpecifiedValue))return!1;n[u]=!0}}return!0}},{name:"omitVerticalDotPlot",description:"Do not output vertical dot plot.",properties:[E.Property.CHANNEL],allowEnumSpecForProperties:!0,strict:!1,satisfy:function(e,r,t){var n=e.getEncodings();return 1!==n.length||n[0].channel!==o.Channel.Y}},{name:"hasAppropriateGraphicTypeForMark",description:"Has appropriate graphic type for mark",properties:[E.Property.CHANNEL,E.Property.MARK,E.Property.TYPE,E.Property.TIMEUNIT,E.Property.BIN,E.Property.AGGREGATE,E.Property.AUTOCOUNT],allowEnumSpecForProperties:!1,strict:!1,satisfy:function(e,r,t){var n=e.getMark();switch(n){case c.Mark.AREA:case c.Mark.LINE:if(e.isAggregate()){var i=e.getEncodingQueryByChannel(o.Channel.X),a=e.getEncodingQueryByChannel(o.Channel.Y),u=i&&S.isMeasure(i),l=a&&S.isMeasure(a);return i&&a&&u!==l&&!(!u&&i.type===s.Type.NOMINAL)&&!(!l&&a.type===s.Type.NOMINAL)}return!0;case c.Mark.TEXT:return!0;case c.Mark.BAR:case c.Mark.TICK:return e.channelUsed(o.Channel.SIZE)?!1:e.isMeasure(o.Channel.X)!==e.isMeasure(o.Channel.Y);case c.Mark.CIRCLE:case c.Mark.POINT:case c.Mark.SQUARE:case c.Mark.RULE:return!0}throw new Error("hasAllRequiredChannelsForMark not implemented for mark"+n)}},{name:"omitNonLinearScaleTypeWithStack",description:"Stacked plot should only use linear scale",properties:[E.Property.CHANNEL,E.Property.MARK,E.Property.AGGREGATE,E.Property.AUTOCOUNT,E.Property.SCALE,E.Property.SCALE_TYPE,E.Property.TYPE],allowEnumSpecForProperties:!1,strict:!0,satisfy:function(e,r,t){var n=e.stack();if(n)for(var i=0,a=e.getEncodings();i<a.length;i++){var c=a[i];if((c.aggregate||c.autoCount===!0)&&c.type===s.Type.QUANTITATIVE&&T.contains([o.Channel.X,o.Channel.Y],c.channel)&&S.scaleType(c)!==u.ScaleType.LINEAR)return!1}return!0}},{name:"omitNonSumStack",description:"Stacked plot should use summative aggregation such as sum, count, or distinct",properties:[E.Property.CHANNEL,E.Property.MARK,E.Property.AGGREGATE,E.Property.AUTOCOUNT],allowEnumSpecForProperties:!1,strict:!1,satisfy:function(e,r,t){var n=e.stack();if(n){var i=e.getEncodingQueryByChannel(n.fieldChannel);return T.contains(a.SUM_OPS,i.aggregate)||!!i.autoCount}return!0}},{name:"omitTableWithOcclusionIfAutoAddCount",description:"Plots without aggregation or autocount where x and y are both dimensions should be omitted if autoAddCount is enabled as they often lead to occlusion",properties:[E.Property.CHANNEL,E.Property.TYPE,E.Property.TIMEUNIT,E.Property.BIN,E.Property.AGGREGATE,E.Property.AUTOCOUNT],allowEnumSpecForProperties:!1,strict:!1,satisfy:function(e,r,t){return!(t.autoAddCount&&e.isDimension(o.Channel.X)&&e.isDimension(o.Channel.Y))||e.isAggregate()}}].map(function(e){return new A(e)}),t.SPEC_CONSTRAINT_INDEX=t.SPEC_CONSTRAINTS.reduce(function(e,r){return e[r.name()]=r,e},{}),t.SPEC_CONSTRAINTS_BY_PROPERTY=t.SPEC_CONSTRAINTS.reduce(function(e,r){return r.properties().forEach(function(t){e[t]=e[t]||[],e[t].push(r)}),e},{}),t.checkSpec=n},{"../enumspec":16,"../property":21,"../query/encoding":22,"../util":37,"./base":10,"vega-lite/src/aggregate":43,"vega-lite/src/channel":46,"vega-lite/src/mark":49,"vega-lite/src/scale":50,"vega-lite/src/type":54}],14:[function(e,r,t){"use strict";t.version="0.6.7";var n=e("./util");t.config=e("./config"),t.constraint=e("./constraint/constraint"),t.enumerate=e("./enumerator"),t.enumSpec=e("./enumspec");var i=e("./generate");t.generate=i.generate,t.model=e("./model"),t.nest=e("./nest"),t.property=e("./property");var a=e("./query/query"),o=e("./query/query");t.query=n.extend(o.query,a),t.ranking=e("./ranking/ranking"),t.schema=e("./schema"),t.util=e("./util")},{"./config":9,"./constraint/constraint":11,"./enumerator":15,"./enumspec":16,"./generate":18,"./model":19,"./nest":20,"./property":21,"./query/query":24,"./ranking/ranking":34,"./schema":35,"./util":37}],15:[function(e,r,t){"use strict";function n(e){return function(r,t,n){return function(o,c){function u(l){if(l===s.length)return void o.push(c.duplicate());var p=s[l],E=r.encodings[p][e],f=c.getEncodingQueryByIndex(p),T=c.getEncodingProperty(p,e);f.autoCount!==!1&&T?(E["enum"].forEach(function(r){null===r&&(r=void 0),c.setEncodingProperty(p,e,r,E);var o=i.checkEncoding(e,E,p,c,t,n);if(!o){var s=a.checkSpec(e,E,c,t,n);s||u(l+1)}}),c.resetEncodingProperty(p,e,E)):u(l+1)}var s=r.encodingIndicesByProperty[e];return u(0),o}}}var i=e("./constraint/encoding"),a=e("./constraint/spec"),o=e("./property");t.ENUMERATOR_INDEX={},t.ENUMERATOR_INDEX[o.Property.MARK]=function(e,r,t){return function(n,i){var c=i.getMark();return c["enum"].forEach(function(c){i.setMark(c);var u=a.checkSpec(o.Property.MARK,e.mark,i,r,t);u||n.push(i.duplicate())}),i.resetMark(),n}},o.ENCODING_PROPERTIES.forEach(function(e){t.ENUMERATOR_INDEX[e]=n(e)}),o.NESTED_ENCODING_PROPERTIES.forEach(function(e){t.ENUMERATOR_INDEX[e.property]=n(e.property)}),t.EncodingPropertyGeneratorFactory=n},{"./constraint/encoding":12,"./constraint/spec":13,"./property":21}],16:[function(e,r,t){"use strict";function n(e){return e===t.SHORT_ENUM_SPEC||void 0!==e&&(!!e["enum"]||!!e.name)&&!a.isArray(e)}function i(e,r,n){return a.extend({},{name:r,"enum":n},e===t.SHORT_ENUM_SPEC?{}:e)}var a=e("./util");!function(e){e[e.ENUMSPEC="?"]="ENUMSPEC"}(t.ShortEnumSpec||(t.ShortEnumSpec={}));var o=t.ShortEnumSpec;t.SHORT_ENUM_SPEC=o.ENUMSPEC,t.isEnumSpec=n,t.initEnumSpec=i},{"./util":37}],17:[function(e,r,t){"use strict";var n=e("./property"),i=e("./util"),a=function(){function e(){this._mark=void 0,this._encodings={},this._encodingIndicesByProperty={}}return e.prototype.setEncodingProperty=function(e,r,t){var n=this._encodings,i=n[e]=n[e]||{};i[r]=t;var a=this._encodingIndicesByProperty;return(a[r]=a[r]||[]).push(e),this},e.prototype.hasEncodingProperty=function(e,r){return!!(this._encodings[e]||{})[r]},e.prototype.hasProperty=function(e){if(n.isEncodingProperty(e))return!!this.encodingIndicesByProperty[e];if(e===n.Property.MARK)return!!this.mark;throw new Error("Unimplemented for property "+e)},e.prototype.isEmpty=function(){return!this.mark&&0===i.keys(this.encodingIndicesByProperty).length},e.prototype.setMark=function(e){return this._mark=e,this},Object.defineProperty(e.prototype,"mark",{get:function(){return this._mark},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"encodings",{get:function(){return this._encodings},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"encodingIndicesByProperty",{get:function(){return this._encodingIndicesByProperty},enumerable:!0,configurable:!0}),e}();t.EnumSpecIndex=a},{"./property":21,"./util":37}],18:[function(e,r,t){"use strict";function n(e,r,t){void 0===t&&(t=a.DEFAULT_QUERY_CONFIG);var n=o.SpecQueryModel.build(e,r,t),u=n.enumSpecIndex,s=[n];return t.propertyPrecedence.forEach(function(e){if(u.hasProperty(e)){var n=i.ENUMERATOR_INDEX[e](u,r,t);s=s.reduce(n,[])}}),!t.stylize||null===t.nominalColorScaleForHighCardinality&&null===t.smallBandSizeForHighCardinalityOrFacet&&null===t.xAxisOnTopForHighYCardinalityWithoutColumn?s:c.stylize(s,r,t)}var i=e("../src/enumerator"),a=e("./config"),o=e("./model"),c=e("./stylize");t.generate=n},{"../src/enumerator":15,"./config":9,"./model":19,"./stylize":36}],19:[function(e,r,t){"use strict";function n(e){switch(e){case c.Property.MARK:return"m";case c.Property.CHANNEL:return"c";case c.Property.AGGREGATE:return"a";case c.Property.AUTOCOUNT:return"#";case c.Property.BIN:return"b";case c.Property.BIN_MAXBINS:return"b-mb";case c.Property.SORT:return"so";case c.Property.SORT_FIELD:return"so-f";case c.Property.SORT_OP:return"so-op";case c.Property.SORT_ORDER:return"so-or";case c.Property.SCALE:return"s";case c.Property.SCALE_BANDSIZE:return"s-bs";case c.Property.SCALE_CLAMP:return"s-c";case c.Property.SCALE_DOMAIN:return"s-d";case c.Property.SCALE_EXPONENT:return"s-e";case c.Property.SCALE_NICE:return"s-n";case c.Property.SCALE_RANGE:return"s-ra";case c.Property.SCALE_ROUND:return"s-r";case c.Property.SCALE_TYPE:return"s-t";case c.Property.SCALE_USERAWDOMAIN:return"s-u";case c.Property.SCALE_ZERO:return"s-z";case c.Property.AXIS:return"ax";case c.Property.AXIS_AXISCOLOR:return"ax-ac";case c.Property.AXIS_AXISWIDTH:return"ax-aw";case c.Property.AXIS_LAYER:return"ax-lay";case c.Property.AXIS_OFFSET:return"ax-of";case c.Property.AXIS_ORIENT:return"ax-or";case c.Property.AXIS_GRID:return"ax-g";case c.Property.AXIS_GRIDCOLOR:return"ax-gc";case c.Property.AXIS_GRIDDASH:return"ax-gd";case c.Property.AXIS_GRIDOPACITY:return"ax-go";case c.Property.AXIS_GRIDWIDTH:return"ax-gw";case c.Property.AXIS_LABELS:return"ax-lab";case c.Property.AXIS_FORMAT:return"ax-f";case c.Property.AXIS_LABELANGLE:return"ax-laba";case c.Property.AXIS_LABELMAXLENGTH:return"ax-labm";case c.Property.AXIS_SHORTTIMELABELS:return"ax-stl";case c.Property.AXIS_SUBDIVIDE:return"ax-sub";case c.Property.AXIS_TICKS:return"ax-t";case c.Property.AXIS_TICKCOLOR:return"ax-tc";case c.Property.AXIS_TICKLABELCOLOR:return"ax-tlc";case c.Property.AXIS_TICKLABELFONT:return"ax-tlf";case c.Property.AXIS_TICKLABELFONTSIZE:return"ax-tlfs";case c.Property.AXIS_TICKPADDING:return"ax-tp";case c.Property.AXIS_TICKSIZE:return"ax-ts";case c.Property.AXIS_TICKSIZEMAJOR:return"ax-tsma";case c.Property.AXIS_TICKSIZEMINOR:return"ax-tsmi";case c.Property.AXIS_TICKSIZEEND:return"ax-tse";case c.Property.AXIS_TICKWIDTH:return"ax-tw";case c.Property.AXIS_VALUES:return"ax-v";case c.Property.AXIS_TITLE:return"ax-ti";case c.Property.AXIS_TITLECOLOR:return"ax-tic";case c.Property.AXIS_TITLEFONT:return"ax-tif";case c.Property.AXIS_TITLEFONTSIZE:return"ax-tifs";case c.Property.AXIS_TITLEFONTWEIGHT:return"ax-tifw";case c.Property.AXIS_TITLEOFFSET:return"ax-tio";case c.Property.AXIS_TITLEMAXLENGTH:return"ax-timl";case c.Property.AXIS_CHARACTERWIDTH:return"ax-cw";case c.Property.LEGEND:return"l";case c.Property.LEGEND_ORIENT:return"l-or";case c.Property.LEGEND_OFFSET:return"l-of";case c.Property.LEGEND_VALUES:return"l-v";case c.Property.LEGEND_FORMAT:return"l-f";case c.Property.LEGEND_LABELALIGN:return"l-la";case c.Property.LEGEND_LABELBASELINE:return"l-lb";case c.Property.LEGEND_LABELCOLOR:return"l-lc";case c.Property.LEGEND_LABELFONT:return"l-lf";case c.Property.LEGEND_LABELFONTSIZE:return"l-lfs";case c.Property.LEGEND_SHORTTIMELABELS:return"l-stl";case c.Property.LEGEND_SYMBOLCOLOR:return"l-syc";case c.Property.LEGEND_SYMBOLSHAPE:return"l-sysh";case c.Property.LEGEND_SYMBOLSIZE:return"l-sysi";case c.Property.LEGEND_SYMBOLSTROKEWIDTH:return"l-sysw";case c.Property.LEGEND_TITLE:return"l-ti";case c.Property.LEGEND_TITLECOLOR:return"l-tic";case c.Property.LEGEND_TITLEFONT:return"l-tif";case c.Property.LEGEND_TITLEFONTSIZE:return"l-tifs";case c.Property.LEGEND_TITLEFONTWEIGHT:return"l-tifw";case c.Property.TIMEUNIT:return"tu";case c.Property.FIELD:return"f";case c.Property.TYPE:return"t"}throw new Error("Default name undefined")}function i(e,r,t){switch(e){case c.Property.FIELD:case c.Property.SORT_FIELD:return r.fields();case c.Property.AXIS:case c.Property.AXIS_GRID:case c.Property.AXIS_LABELS:case c.Property.AXIS_SHORTTIMELABELS:case c.Property.BIN:case c.Property.LEGEND:case c.Property.LEGEND_SHORTTIMELABELS:case c.Property.SCALE:case c.Property.SCALE_CLAMP:case c.Property.SCALE_NICE:case c.Property.SCALE_ROUND:case c.Property.SCALE_USERAWDOMAIN:case c.Property.SCALE_ZERO:case c.Property.AUTOCOUNT:return[!1,!0];case c.Property.AGGREGATE:return t.aggregates;case c.Property.AXIS_AXISCOLOR:return t.axisAxisColors;case c.Property.AXIS_AXISWIDTH:return t.axisAxisWidths;case c.Property.AXIS_LAYER:return t.axisLayers;case c.Property.AXIS_OFFSET:return t.axisOffsets;case c.Property.AXIS_ORIENT:return t.axisOrients;case c.Property.AXIS_GRIDCOLOR:return t.axisGridColors;case c.Property.AXIS_GRIDDASH:return t.axisGridDashes;case c.Property.AXIS_GRIDOPACITY:return t.axisGridOpacities;case c.Property.AXIS_GRIDWIDTH:return t.axisGridWidths;case c.Property.AXIS_FORMAT:return t.axisFormats;case c.Property.AXIS_LABELANGLE:return t.axisLabelAngles;case c.Property.AXIS_LABELMAXLENGTH:return t.axisLabelMaxLengths;case c.Property.AXIS_SUBDIVIDE:return t.axisSubDivides;case c.Property.AXIS_TICKS:return t.axisTicks;case c.Property.AXIS_TICKCOLOR:return t.axisTickColors;case c.Property.AXIS_TICKLABELCOLOR:return t.axisTickLabelColors;case c.Property.AXIS_TICKLABELFONT:return t.axisTickLabelFonts;case c.Property.AXIS_TICKLABELFONTSIZE:return t.axisTickLabelFontSizes;case c.Property.AXIS_TICKPADDING:return t.axisTickPaddings;case c.Property.AXIS_TICKSIZE:return t.axisTickSizes;case c.Property.AXIS_TICKSIZEMAJOR:return t.axisTickSizeMajors;case c.Property.AXIS_TICKSIZEMINOR:return t.axisTickSizeMinors;case c.Property.AXIS_TICKSIZEEND:return t.axisTickSizeEnds;case c.Property.AXIS_TICKWIDTH:return t.axisTickWidths;case c.Property.AXIS_VALUES:return t.axisValuesList;case c.Property.AXIS_TITLE:return t.axisTitles;case c.Property.AXIS_TITLECOLOR:return t.axisTitleColors;case c.Property.AXIS_TITLEFONT:return t.axisTitleFonts;case c.Property.AXIS_TITLEFONTWEIGHT:return t.axisTitleFontWeights;case c.Property.AXIS_TITLEFONTSIZE:return t.axisTitleFontSizes;case c.Property.AXIS_TITLEOFFSET:return t.axisTitleOffsets;case c.Property.AXIS_TITLEMAXLENGTH:return t.axisTitleMaxLengths;case c.Property.AXIS_CHARACTERWIDTH:return t.axisCharacterWidths;case c.Property.BIN_MAXBINS:return t.maxBinsList;case c.Property.CHANNEL:return t.channels;case c.Property.MARK:return t.marks;case c.Property.LEGEND_ORIENT:return t.legendOrients;case c.Property.LEGEND_OFFSET:return t.legendOffsets;case c.Property.LEGEND_VALUES:return t.legendValuesList;case c.Property.LEGEND_FORMAT:return t.legendFormats;case c.Property.LEGEND_LABELALIGN:return t.legendLabelAligns;case c.Property.LEGEND_LABELBASELINE:return t.legendLabelBaselines;case c.Property.LEGEND_LABELCOLOR:return t.legendLabelColors;case c.Property.LEGEND_LABELFONT:return t.legendLabelFonts;case c.Property.LEGEND_LABELFONTSIZE:return t.legendLabelFontSizes;case c.Property.LEGEND_SYMBOLCOLOR:return t.legendSymbolColors;case c.Property.LEGEND_SYMBOLSHAPE:return t.legendSymbolShapes;case c.Property.LEGEND_SYMBOLSIZE:return t.legendSymbolSizes;case c.Property.LEGEND_SYMBOLSTROKEWIDTH:return t.legendSymbolStrokeWidths;case c.Property.LEGEND_TITLE:return t.legendTitles;case c.Property.LEGEND_TITLECOLOR:return t.legendTitleColors;case c.Property.LEGEND_TITLEFONT:return t.legendTitleFonts;case c.Property.LEGEND_TITLEFONTSIZE:return t.legendTitleFontSizes;case c.Property.LEGEND_TITLEFONTWEIGHT:return t.legendTitleFontWeights;case c.Property.SORT:return t.sorts;case c.Property.SORT_OP:return t.sortOps;case c.Property.SORT_ORDER:return t.sortOrders;case c.Property.SCALE_BANDSIZE:return t.scaleBandSizes;case c.Property.SCALE_DOMAIN:return t.scaleDomains;case c.Property.SCALE_EXPONENT:return t.scaleExponents;case c.Property.SCALE_RANGE:return t.scaleRanges;case c.Property.SCALE_TYPE:return t.scaleTypes;case c.Property.TIMEUNIT:return t.timeUnits;case c.Property.TYPE:return t.types}throw new Error("No default enumValues for "+e)}var a=e("vega-lite/src/aggregate"),o=e("vega-lite/src/type"),c=e("./property"),u=e("./enumspec"),s=e("./enumspecindex"),l=e("./query/spec"),p=e("./query/encoding"),E=e("./query/groupby"),f=e("./query/shorthand"),T=e("./util");t.getDefaultName=n,t.getDefaultEnumValues=i;var S=function(){function e(e,r,t,n,i){this._rankingScore={},this._spec=e,this._channelCount=e.encodings.reduce(function(e,r){return u.isEnumSpec(r.channel)||r.autoCount===!1||(e[r.channel]=1),e},{}),this._enumSpecIndex=r,this._enumSpecAssignment=i,this._opt=n,this._schema=t}return e.build=function(r,t,a){
var l=new s.EnumSpecIndex;if(u.isEnumSpec(r.mark)){var p=n(c.Property.MARK);r.mark=u.initEnumSpec(r.mark,p,a.marks),l.setMark(r.mark)}if(r.encodings.forEach(function(e,r){void 0!==e.autoCount&&(console.warn("A field with autoCount should not be included as autoCount meant to be an internal object."),e.type=o.Type.QUANTITATIVE),void 0===e.type&&(e.type=u.SHORT_ENUM_SPEC),c.ENCODING_PROPERTIES.forEach(function(o){if(u.isEnumSpec(e[o])){var c=n(o)+r,s=i(o,t,a),p=e[o]=u.initEnumSpec(e[o],c,s);l.setEncodingProperty(r,o,p)}}),c.NESTED_ENCODING_PROPERTIES.forEach(function(o){var c=e[o.parent];if(c){var s=o.property,p=o.child;if(u.isEnumSpec(c[p])){var E=n(s)+r,f=i(s,t,a),T=c[p]=u.initEnumSpec(c[p],E,f);l.setEncodingProperty(r,s,T)}}})}),a.autoAddCount){var E={channel:{name:n(c.Property.CHANNEL)+r.encodings.length,"enum":i(c.Property.CHANNEL,t,a)},autoCount:{name:n(c.Property.AUTOCOUNT)+r.encodings.length,"enum":[!1,!0]},type:o.Type.QUANTITATIVE};r.encodings.push(E);var f=r.encodings.length-1;l.setEncodingProperty(f,c.Property.CHANNEL,E.channel),l.setEncodingProperty(f,c.Property.AUTOCOUNT,E.autoCount)}return new e(r,l,t,a,{})},Object.defineProperty(e.prototype,"enumSpecIndex",{get:function(){return this._enumSpecIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return this._schema},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"specQuery",{get:function(){return this._spec},enumerable:!0,configurable:!0}),e.prototype.duplicate=function(){return new e(T.duplicate(this._spec),this._enumSpecIndex,this._schema,this._opt,T.duplicate(this._enumSpecAssignment))},e.prototype.setMark=function(e){var r=this._spec.mark.name;this._enumSpecAssignment[r]=this._spec.mark=e},e.prototype.resetMark=function(){var e=this._spec.mark=this._enumSpecIndex.mark;delete this._enumSpecAssignment[e.name]},e.prototype.getMark=function(){return this._spec.mark},e.prototype.getEncodingProperty=function(e,r){var t=this._spec.encodings[e],n=c.getNestedEncodingProperty(r);return n?t[n.parent][n.child]:t[r]},e.prototype.setEncodingProperty=function(e,r,t,n){var i=this._spec.encodings[e],a=c.getNestedEncodingProperty(r);r===c.Property.CHANNEL&&i.channel&&!u.isEnumSpec(i.channel)&&this._channelCount[i.channel]--,a?i[a.parent][a.child]=t:c.hasNestedProperty(r)&&t===!0?i[r]=T.extend({},i[r],{"enum":void 0,name:void 0}):i[r]=t,this._enumSpecAssignment[n.name]=t,r===c.Property.CHANNEL&&(this._channelCount[t]=(this._channelCount[t]||0)+1)},e.prototype.resetEncodingProperty=function(e,r,t){var n=this._spec.encodings[e],i=c.getNestedEncodingProperty(r);r===c.Property.CHANNEL&&this._channelCount[n.channel]--,i?n[i.parent][i.child]=t:n[r]=t,delete this._enumSpecAssignment[t.name]},e.prototype.channelUsed=function(e){return this._channelCount[e]>0},e.prototype.stack=function(){return l.stack(this._spec)},e.prototype.getEncodings=function(){return this._spec.encodings.filter(function(e){return e.autoCount!==!1})},e.prototype.getEncodingQueryByChannel=function(e){for(var r=0;r<this._spec.encodings.length;r++)if(this._spec.encodings[r].channel===e)return this._spec.encodings[r]},e.prototype.getEncodingQueryByIndex=function(e){return this._spec.encodings[e]},e.prototype.isDimension=function(e){var r=this.getEncodingQueryByChannel(e);return r&&p.isDimension(r)},e.prototype.isMeasure=function(e){var r=this.getEncodingQueryByChannel(e);return r&&p.isMeasure(r)},e.prototype.isAggregate=function(){return l.isAggregate(this._spec)},e.prototype.toShorthand=function(e){if(e){var r={},t={};return E.parse(e,r,t),f.spec(this._spec,r,f.getReplacerIndex(t))}return f.spec(this._spec)},e.prototype._encoding=function(){for(var e={},r=0;r<this._spec.encodings.length;r++){var t=this._spec.encodings[r],n={};if(t.autoCount===!0)n.aggregate=a.AggregateOp.COUNT,n.field="*",n.type=o.Type.QUANTITATIVE;else if(t.autoCount===!1)continue;if(u.isEnumSpec(t.channel))return null;for(var i=[c.Property.AGGREGATE,c.Property.BIN,c.Property.TIMEUNIT,c.Property.FIELD,c.Property.TYPE,c.Property.SCALE,c.Property.SORT,c.Property.AXIS,c.Property.LEGEND],s=0;s<i.length;s++){var l=i[s];if(u.isEnumSpec(t[l]))return null;void 0!==t[l]&&(f.PROPERTY_SUPPORTED_CHANNELS[l]&&!f.PROPERTY_SUPPORTED_CHANNELS[l][t.channel]||(n[l]=t[l]))}n.bin===!1&&delete n.bin,e[t.channel]=n}return e},e.prototype.toSpec=function(e){if(u.isEnumSpec(this._spec.mark))return null;var r={};return e=e||this._spec.data,e&&(r.data=e),this._spec.transform&&(r.transform=this._spec.transform),r.mark=this._spec.mark,r.encoding=this._encoding(),null===r.encoding?null:((this._spec.config||this._opt.defaultSpecConfig)&&(r.config=T.extend({},this._opt.defaultSpecConfig,this._spec.config)),r)},e.prototype.getRankingScore=function(e){return this._rankingScore[e]},e.prototype.setRankingScore=function(e,r){this._rankingScore[e]=r},e}();t.SpecQueryModel=S;var d=function(){function e(e,r,t,n,i){void 0===e&&(e=""),void 0===r&&(r=""),void 0===t&&(t=[]),void 0===n&&(n=void 0),void 0===i&&(i=void 0),this._name=e,this._path=r,this._items=t,this._groupBy=n,this._orderGroupBy=i}return e.prototype.getTopSpecQueryModel=function(){var r=this._items[0];return r instanceof e?r.getTopSpecQueryModel():r},Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupBy",{get:function(){return this._groupBy},set:function(e){this._groupBy=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orderGroupBy",{get:function(){return this._orderGroupBy},set:function(e){this._orderGroupBy=e},enumerable:!0,configurable:!0}),e}();t.SpecQueryModelGroup=d},{"./enumspec":16,"./enumspecindex":17,"./property":21,"./query/encoding":22,"./query/groupby":23,"./query/shorthand":25,"./query/spec":26,"./util":37,"vega-lite/src/aggregate":43,"vega-lite/src/type":54}],20:[function(e,r,t){"use strict";function n(e,r){S[e]=r}function i(e,r){if(r.nest){for(var t=new l.SpecQueryModelGroup,n={},i=[],a=[],o=[],c=0;c<r.nest.length;c++){i.push(c>0?p.duplicate(i[c-1]):{}),a.push(c>0?p.duplicate(a[c-1]):{});var s=r.nest[c].groupBy;u.isArray(s)&&(E.parse(s,i[c],a[c]),o.push(f.getReplacerIndex(a[c])))}return e.forEach(function(e){for(var a="",c=t,s=0;s<r.nest.length;s++){var p=c.groupBy=r.nest[s].groupBy;c.orderGroupBy=r.nest[s].orderGroupBy;var E=u.isArray(p)?f.spec(e.specQuery,i[s],o[s]):S[p](e);a+="/"+E,n[a]||(n[a]=new l.SpecQueryModelGroup(E,a,[]),c.items.push(n[a])),c=n[a]}c.items.push(e)}),t}return new l.SpecQueryModelGroup("","",e)}function a(e){if(s.isEnumSpec(e))return s.SHORT_ENUM_SPEC+"";var r=e;switch(r){case c.Channel.X:case c.Channel.Y:return"xy";case c.Channel.ROW:case c.Channel.COLUMN:return"facet";case c.Channel.COLOR:case c.Channel.SIZE:case c.Channel.SHAPE:case c.Channel.OPACITY:return"non-xy";case c.Channel.TEXT:case c.Channel.DETAIL:case c.Channel.PATH:case c.Channel.ORDER:return r+"";default:return console.warn("channel type not implemented for "+r),r+""}}function o(e){var r=T.stack(e.specQuery);return r?"stack="+r.offset+"|":""}var c=e("vega-lite/src/channel"),u=e("datalib/src/util"),s=e("./enumspec"),l=e("./model"),p=e("./util"),E=e("./query/groupby"),f=e("./query/shorthand"),T=e("./query/spec"),S={};t.registerKeyFn=n,t.FIELD="field",t.FIELD_TRANSFORM="fieldTransform",t.ENCODING="encoding",t.TRANSPOSE="transpose",t.SPEC="spec",t.nest=i,n(t.FIELD,function(e){return e.getEncodings().map(function(e){return e.field}).filter(function(e){return e&&"*"!==e}).sort().join("|")}),n(t.FIELD_TRANSFORM,function(e){return e.getEncodings().map(function(e){return f.fieldDef(e)}).sort().join("|")}),n(t.ENCODING,function(e){return o(e)+e.getEncodings().map(function(e){var r=f.fieldDef(e);return a(e.channel)+":"+r}).sort().join("|")}),n(t.TRANSPOSE,function(e){return e.getMark()+"|"+o(e)+e.getEncodings().map(function(e){var r=f.fieldDef(e),t=e.channel===c.Channel.X||e.channel===c.Channel.Y?"xy":e.channel===c.Channel.ROW||e.channel===c.Channel.COLUMN?"facet":e.channel;return t+":"+r}).sort().join("|")}),n(t.SPEC,function(e){return JSON.stringify(e.specQuery)})},{"./enumspec":16,"./model":19,"./query/groupby":23,"./query/shorthand":25,"./query/spec":26,"./util":37,"datalib/src/util":8,"vega-lite/src/channel":46}],21:[function(e,r,t){"use strict";function n(e){switch(e){case s.BIN:case s.SCALE:case s.SORT:case s.AXIS:case s.LEGEND:return!0;case s.MARK:case s.FILTER:case s.CALCULATE:case s.FILTERINVALID:case s.STACK:case s.CHANNEL:case s.AGGREGATE:case s.AUTOCOUNT:case s.TIMEUNIT:case s.FIELD:case s.TYPE:case s.BIN_MAXBINS:case s.SCALE_BANDSIZE:case s.SCALE_CLAMP:case s.SCALE_DOMAIN:case s.SCALE_EXPONENT:case s.SCALE_NICE:case s.SCALE_RANGE:case s.SCALE_ROUND:case s.SCALE_TYPE:case s.SCALE_USERAWDOMAIN:case s.SCALE_ZERO:case s.AXIS_AXISCOLOR:case s.AXIS_AXISWIDTH:case s.AXIS_LAYER:case s.AXIS_OFFSET:case s.AXIS_ORIENT:case s.AXIS_GRID:case s.AXIS_GRIDCOLOR:case s.AXIS_GRIDDASH:case s.AXIS_GRIDOPACITY:case s.AXIS_GRIDWIDTH:case s.AXIS_LABELS:case s.AXIS_FORMAT:case s.AXIS_LABELANGLE:case s.AXIS_LABELMAXLENGTH:case s.AXIS_SHORTTIMELABELS:case s.AXIS_TICKS:case s.AXIS_SUBDIVIDE:case s.AXIS_TICKCOLOR:case s.AXIS_TICKLABELCOLOR:case s.AXIS_TICKLABELFONT:case s.AXIS_TICKLABELFONTSIZE:case s.AXIS_TICKPADDING:case s.AXIS_TICKSIZE:case s.AXIS_TICKSIZEMAJOR:case s.AXIS_TICKSIZEMINOR:case s.AXIS_TICKSIZEEND:case s.AXIS_TICKWIDTH:case s.AXIS_VALUES:case s.AXIS_TITLE:case s.AXIS_TITLECOLOR:case s.AXIS_TITLEFONT:case s.AXIS_TITLEFONTSIZE:case s.AXIS_TITLEFONTWEIGHT:case s.AXIS_CHARACTERWIDTH:case s.AXIS_TITLEMAXLENGTH:case s.AXIS_TITLEOFFSET:case s.LEGEND_ORIENT:case s.LEGEND_OFFSET:case s.LEGEND_VALUES:case s.LEGEND_FORMAT:case s.LEGEND_LABELALIGN:case s.LEGEND_LABELBASELINE:case s.LEGEND_LABELCOLOR:case s.LEGEND_LABELFONT:case s.LEGEND_LABELFONTSIZE:case s.LEGEND_SHORTTIMELABELS:case s.LEGEND_SYMBOLCOLOR:case s.LEGEND_SYMBOLSHAPE:case s.LEGEND_SYMBOLSIZE:case s.LEGEND_SYMBOLSTROKEWIDTH:case s.LEGEND_TITLE:case s.LEGEND_TITLECOLOR:case s.LEGEND_TITLEFONT:case s.LEGEND_TITLEFONTSIZE:case s.LEGEND_TITLEFONTWEIGHT:return!1}throw new Error("hasNestedProperty undefined for property "+e)}function i(e){return void 0!==E[e]}function a(e){return l[e]}function o(e){return p[e]}function c(e){return e in l}var u=e("vega-lite/src/scale");!function(e){e[e.MARK="mark"]="MARK",e[e.FILTER="filter"]="FILTER",e[e.CALCULATE="calculate"]="CALCULATE",e[e.FILTERINVALID="filterInvalid"]="FILTERINVALID",e[e.STACK="stack"]="STACK",e[e.CHANNEL="channel"]="CHANNEL",e[e.AGGREGATE="aggregate"]="AGGREGATE",e[e.AUTOCOUNT="autoCount"]="AUTOCOUNT",e[e.BIN="bin"]="BIN",e[e.BIN_MAXBINS="binMaxBins"]="BIN_MAXBINS",e[e.HAS_FN="hasFn"]="HAS_FN",e[e.TIMEUNIT="timeUnit"]="TIMEUNIT",e[e.FIELD="field"]="FIELD",e[e.TYPE="type"]="TYPE",e[e.SORT="sort"]="SORT",e[e.SORT_FIELD="sortField"]="SORT_FIELD",e[e.SORT_OP="sortOp"]="SORT_OP",e[e.SORT_ORDER="sortOrder"]="SORT_ORDER",e[e.SCALE="scale"]="SCALE",e[e.SCALE_BANDSIZE="scaleBandSize"]="SCALE_BANDSIZE",e[e.SCALE_CLAMP="scaleClamp"]="SCALE_CLAMP",e[e.SCALE_DOMAIN="scaleDomain"]="SCALE_DOMAIN",e[e.SCALE_EXPONENT="scaleExponent"]="SCALE_EXPONENT",e[e.SCALE_NICE="scaleNice"]="SCALE_NICE",e[e.SCALE_RANGE="scaleRange"]="SCALE_RANGE",e[e.SCALE_ROUND="scaleRound"]="SCALE_ROUND",e[e.SCALE_TYPE="scaleType"]="SCALE_TYPE",e[e.SCALE_USERAWDOMAIN="scaleUseRawDomain"]="SCALE_USERAWDOMAIN",e[e.SCALE_ZERO="scaleZero"]="SCALE_ZERO",e[e.AXIS="axis"]="AXIS",e[e.AXIS_AXISCOLOR="axisAxisColor"]="AXIS_AXISCOLOR",e[e.AXIS_AXISWIDTH="axisAxisWidth"]="AXIS_AXISWIDTH",e[e.AXIS_LAYER="axisLayer"]="AXIS_LAYER",e[e.AXIS_OFFSET="axisOffset"]="AXIS_OFFSET",e[e.AXIS_ORIENT="axisOrient"]="AXIS_ORIENT",e[e.AXIS_GRID="axisGrid"]="AXIS_GRID",e[e.AXIS_GRIDCOLOR="axisGridColor"]="AXIS_GRIDCOLOR",e[e.AXIS_GRIDDASH="axisGridDash"]="AXIS_GRIDDASH",e[e.AXIS_GRIDOPACITY="axisGridOpacity"]="AXIS_GRIDOPACITY",e[e.AXIS_GRIDWIDTH="axisGridWidth"]="AXIS_GRIDWIDTH",e[e.AXIS_LABELS="axisLabels"]="AXIS_LABELS",e[e.AXIS_FORMAT="axisFormat"]="AXIS_FORMAT",e[e.AXIS_LABELANGLE="axisLabelAngle"]="AXIS_LABELANGLE",e[e.AXIS_LABELMAXLENGTH="axisLabelMaxLength"]="AXIS_LABELMAXLENGTH",e[e.AXIS_SHORTTIMELABELS="axisShortTimeLabels"]="AXIS_SHORTTIMELABELS",e[e.AXIS_SUBDIVIDE="axisSubdivide"]="AXIS_SUBDIVIDE",e[e.AXIS_TICKS="axisTicks"]="AXIS_TICKS",e[e.AXIS_TICKCOLOR="axisTickColor"]="AXIS_TICKCOLOR",e[e.AXIS_TICKLABELCOLOR="axisTickLabelColor"]="AXIS_TICKLABELCOLOR",e[e.AXIS_TICKLABELFONT="axisTickLabelFont"]="AXIS_TICKLABELFONT",e[e.AXIS_TICKLABELFONTSIZE="axisTickLabelFontSize"]="AXIS_TICKLABELFONTSIZE",e[e.AXIS_TICKPADDING="axisTickPadding"]="AXIS_TICKPADDING",e[e.AXIS_TICKSIZE="axisTickSize"]="AXIS_TICKSIZE",e[e.AXIS_TICKSIZEMAJOR="axisTickSizeMajor"]="AXIS_TICKSIZEMAJOR",e[e.AXIS_TICKSIZEMINOR="axisTickSizeMinor"]="AXIS_TICKSIZEMINOR",e[e.AXIS_TICKSIZEEND="axisTickSizeEnd"]="AXIS_TICKSIZEEND",e[e.AXIS_TICKWIDTH="axisTickWidth"]="AXIS_TICKWIDTH",e[e.AXIS_VALUES="axisValues"]="AXIS_VALUES",e[e.AXIS_TITLE="axisTitle"]="AXIS_TITLE",e[e.AXIS_TITLECOLOR="axisTitleColor"]="AXIS_TITLECOLOR",e[e.AXIS_TITLEFONT="axisTitleFont"]="AXIS_TITLEFONT",e[e.AXIS_TITLEFONTSIZE="axisTitleFontSize"]="AXIS_TITLEFONTSIZE",e[e.AXIS_TITLEFONTWEIGHT="axisTitleFontWeight"]="AXIS_TITLEFONTWEIGHT",e[e.AXIS_TITLEOFFSET="axisTitleOffset"]="AXIS_TITLEOFFSET",e[e.AXIS_TITLEMAXLENGTH="axisTitleMaxLength"]="AXIS_TITLEMAXLENGTH",e[e.AXIS_CHARACTERWIDTH="axisCharacterWidth"]="AXIS_CHARACTERWIDTH",e[e.LEGEND="legend"]="LEGEND",e[e.LEGEND_ORIENT="legendOrient"]="LEGEND_ORIENT",e[e.LEGEND_OFFSET="legendOffset"]="LEGEND_OFFSET",e[e.LEGEND_VALUES="legendValues"]="LEGEND_VALUES",e[e.LEGEND_FORMAT="legendFormat"]="LEGEND_FORMAT",e[e.LEGEND_LABELALIGN="legendLabelAlign"]="LEGEND_LABELALIGN",e[e.LEGEND_LABELBASELINE="legendLabelBaseline"]="LEGEND_LABELBASELINE",e[e.LEGEND_LABELCOLOR="legendLabelColor"]="LEGEND_LABELCOLOR",e[e.LEGEND_LABELFONT="legendLabelFont"]="LEGEND_LABELFONT",e[e.LEGEND_LABELFONTSIZE="legendLabelFontSize"]="LEGEND_LABELFONTSIZE",e[e.LEGEND_SHORTTIMELABELS="legendShortTimeLabels"]="LEGEND_SHORTTIMELABELS",e[e.LEGEND_SYMBOLCOLOR="legendSymbolColor"]="LEGEND_SYMBOLCOLOR",e[e.LEGEND_SYMBOLSHAPE="legendSymbolShape"]="LEGEND_SYMBOLSHAPE",e[e.LEGEND_SYMBOLSIZE="legendSymbolSize"]="LEGEND_SYMBOLSIZE",e[e.LEGEND_SYMBOLSTROKEWIDTH="legendSymbolStrokeWidth"]="LEGEND_SYMBOLSTROKEWIDTH",e[e.LEGEND_TITLE="legendTitle"]="LEGEND_TITLE",e[e.LEGEND_TITLECOLOR="legendTitleColor"]="LEGEND_TITLECOLOR",e[e.LEGEND_TITLEFONT="legendTitleFont"]="LEGEND_TITLEFONT",e[e.LEGEND_TITLEFONTSIZE="legendTitleFontSize"]="LEGEND_TITLEFONTSIZE",e[e.LEGEND_TITLEFONTWEIGHT="legendTitleFontWeight"]="LEGEND_TITLEFONTWEIGHT"}(t.Property||(t.Property={}));var s=t.Property;t.hasNestedProperty=n,t.ENCODING_PROPERTIES=[s.CHANNEL,s.BIN,s.BIN_MAXBINS,s.TIMEUNIT,s.AGGREGATE,s.AUTOCOUNT,s.FIELD,s.TYPE,s.SORT,s.SORT_FIELD,s.SORT_OP,s.SORT_ORDER,s.SCALE,s.SCALE_BANDSIZE,s.SCALE_CLAMP,s.SCALE_DOMAIN,s.SCALE_EXPONENT,s.SCALE_NICE,s.SCALE_RANGE,s.SCALE_ROUND,s.SCALE_TYPE,s.SCALE_USERAWDOMAIN,s.SCALE_ZERO,s.AXIS,s.AXIS_AXISCOLOR,s.AXIS_AXISWIDTH,s.AXIS_CHARACTERWIDTH,s.AXIS_FORMAT,s.AXIS_GRID,s.AXIS_GRIDCOLOR,s.AXIS_GRIDDASH,s.AXIS_GRIDOPACITY,s.AXIS_GRIDWIDTH,s.AXIS_LABELANGLE,s.AXIS_LABELMAXLENGTH,s.AXIS_LABELS,s.AXIS_LAYER,s.AXIS_OFFSET,s.AXIS_ORIENT,s.AXIS_SHORTTIMELABELS,s.AXIS_SUBDIVIDE,s.AXIS_TICKCOLOR,s.AXIS_TICKLABELCOLOR,s.AXIS_TICKLABELFONT,s.AXIS_TICKLABELFONTSIZE,s.AXIS_TICKPADDING,s.AXIS_TICKS,s.AXIS_TICKSIZE,s.AXIS_TICKSIZEEND,s.AXIS_TICKSIZEMAJOR,s.AXIS_TICKSIZEMINOR,s.AXIS_TICKWIDTH,s.AXIS_TITLE,s.AXIS_TITLECOLOR,s.AXIS_TITLEFONT,s.AXIS_TITLEFONTSIZE,s.AXIS_TITLEFONTWEIGHT,s.AXIS_TITLEMAXLENGTH,s.AXIS_TITLEOFFSET,s.AXIS_VALUES,s.LEGEND,s.LEGEND_ORIENT,s.LEGEND_OFFSET,s.LEGEND_VALUES,s.LEGEND_FORMAT,s.LEGEND_LABELALIGN,s.LEGEND_LABELBASELINE,s.LEGEND_LABELCOLOR,s.LEGEND_LABELFONT,s.LEGEND_LABELFONTSIZE,s.LEGEND_SHORTTIMELABELS,s.LEGEND_SYMBOLCOLOR,s.LEGEND_SYMBOLSHAPE,s.LEGEND_SYMBOLSIZE,s.LEGEND_SYMBOLSTROKEWIDTH,s.LEGEND_TITLE,s.LEGEND_TITLECOLOR,s.LEGEND_TITLEFONT,s.LEGEND_TITLEFONTSIZE,s.LEGEND_TITLEFONTWEIGHT],t.DEFAULT_PROPERTY_PRECEDENCE=[s.TYPE,s.FIELD,s.BIN,s.TIMEUNIT,s.AGGREGATE,s.AUTOCOUNT,s.SORT,s.SORT_FIELD,s.SORT_OP,s.SORT_ORDER,s.BIN_MAXBINS,s.CHANNEL,s.MARK,s.SCALE,s.AXIS,s.LEGEND,s.SCALE_BANDSIZE,s.SCALE_CLAMP,s.SCALE_DOMAIN,s.SCALE_EXPONENT,s.SCALE_NICE,s.SCALE_RANGE,s.SCALE_ROUND,s.SCALE_TYPE,s.SCALE_USERAWDOMAIN,s.SCALE_ZERO,s.AXIS_AXISCOLOR,s.AXIS_AXISWIDTH,s.AXIS_CHARACTERWIDTH,s.AXIS_FORMAT,s.AXIS_GRID,s.AXIS_GRIDCOLOR,s.AXIS_GRIDDASH,s.AXIS_GRIDOPACITY,s.AXIS_GRIDWIDTH,s.AXIS_LABELANGLE,s.AXIS_LABELMAXLENGTH,s.AXIS_LABELS,s.AXIS_LAYER,s.AXIS_OFFSET,s.AXIS_ORIENT,s.AXIS_SHORTTIMELABELS,s.AXIS_SUBDIVIDE,s.AXIS_TICKCOLOR,s.AXIS_TICKLABELCOLOR,s.AXIS_TICKLABELFONT,s.AXIS_TICKLABELFONTSIZE,s.AXIS_TICKPADDING,s.AXIS_TICKS,s.AXIS_TICKSIZE,s.AXIS_TICKSIZEEND,s.AXIS_TICKSIZEMAJOR,s.AXIS_TICKSIZEMINOR,s.AXIS_TICKWIDTH,s.AXIS_TITLE,s.AXIS_TITLECOLOR,s.AXIS_TITLEFONT,s.AXIS_TITLEFONTSIZE,s.AXIS_TITLEFONTWEIGHT,s.AXIS_TITLEMAXLENGTH,s.AXIS_TITLEOFFSET,s.AXIS_VALUES,s.LEGEND_ORIENT,s.LEGEND_OFFSET,s.LEGEND_VALUES,s.LEGEND_FORMAT,s.LEGEND_LABELALIGN,s.LEGEND_LABELBASELINE,s.LEGEND_LABELCOLOR,s.LEGEND_LABELFONT,s.LEGEND_LABELFONTSIZE,s.LEGEND_SHORTTIMELABELS,s.LEGEND_SYMBOLCOLOR,s.LEGEND_SYMBOLSHAPE,s.LEGEND_SYMBOLSIZE,s.LEGEND_SYMBOLSTROKEWIDTH,s.LEGEND_TITLE,s.LEGEND_TITLECOLOR,s.LEGEND_TITLEFONT,s.LEGEND_TITLEFONTSIZE,s.LEGEND_TITLEFONTWEIGHT],t.NESTED_ENCODING_PROPERTIES=[{property:s.BIN_MAXBINS,parent:"bin",child:"maxbins"},{property:s.SORT_FIELD,parent:"sort",child:"field"},{property:s.SORT_OP,parent:"sort",child:"op"},{property:s.SORT_ORDER,parent:"sort",child:"order"},{property:s.SCALE_BANDSIZE,parent:"scale",child:"bandSize"},{property:s.SCALE_CLAMP,parent:"scale",child:"clamp"},{property:s.SCALE_DOMAIN,parent:"scale",child:"domain"},{property:s.SCALE_EXPONENT,parent:"scale",child:"exponent"},{property:s.SCALE_NICE,parent:"scale",child:"nice"},{property:s.SCALE_RANGE,parent:"scale",child:"range"},{property:s.SCALE_ROUND,parent:"scale",child:"round"},{property:s.SCALE_TYPE,parent:"scale",child:"type"},{property:s.SCALE_USERAWDOMAIN,parent:"scale",child:"useRawDomain"},{property:s.SCALE_ZERO,parent:"scale",child:"zero"},{property:s.AXIS_AXISCOLOR,parent:"axis",child:"axisColor"},{property:s.AXIS_AXISWIDTH,parent:"axis",child:"axisWidth"},{property:s.AXIS_LAYER,parent:"axis",child:"layer"},{property:s.AXIS_OFFSET,parent:"axis",child:"offset"},{property:s.AXIS_ORIENT,parent:"axis",child:"orient"},{property:s.AXIS_GRID,parent:"axis",child:"grid"},{property:s.AXIS_GRIDCOLOR,parent:"axis",child:"gridColor"},{property:s.AXIS_GRIDDASH,parent:"axis",child:"gridDash"},{property:s.AXIS_GRIDOPACITY,parent:"axis",child:"gridOpacity"},{property:s.AXIS_GRIDWIDTH,parent:"axis",child:"gridWidth"},{property:s.AXIS_LABELS,parent:"axis",child:"labels"},{property:s.AXIS_FORMAT,parent:"axis",child:"format"},{property:s.AXIS_LABELANGLE,parent:"axis",child:"labelAngle"},{property:s.AXIS_LABELMAXLENGTH,parent:"axis",child:"labelMaxLength"},{property:s.AXIS_SHORTTIMELABELS,parent:"axis",child:"shortTimeLabels"},{property:s.AXIS_TICKS,parent:"axis",child:"ticks"},{property:s.AXIS_SUBDIVIDE,parent:"axis",child:"subdivide"},{property:s.AXIS_TICKCOLOR,parent:"axis",child:"tickColor"},{property:s.AXIS_TICKLABELCOLOR,parent:"axis",child:"tickLabelColor"},{property:s.AXIS_TICKLABELFONT,parent:"axis",child:"tickLabelFont"},{property:s.AXIS_TICKLABELFONTSIZE,parent:"axis",child:"tickLabelFontSize"},{property:s.AXIS_TICKPADDING,parent:"axis",child:"tickPadding"},{property:s.AXIS_TICKSIZE,parent:"axis",child:"tickSize"},{property:s.AXIS_TICKSIZEMAJOR,parent:"axis",child:"tickSizeMajor"},{property:s.AXIS_TICKSIZEMINOR,parent:"axis",child:"tickSizeMinor"},{property:s.AXIS_TICKSIZEEND,parent:"axis",child:"tickSizeEnd"},{property:s.AXIS_TICKWIDTH,parent:"axis",child:"tickWidth"},{property:s.AXIS_VALUES,parent:"axis",child:"values"},{property:s.AXIS_TITLE,parent:"axis",child:"title"},{property:s.AXIS_TITLECOLOR,parent:"axis",child:"titleColor"},{property:s.AXIS_TITLEFONT,parent:"axis",child:"titleFont"},{property:s.AXIS_TITLEFONTSIZE,parent:"axis",child:"titleFontSize"},{property:s.AXIS_TITLEFONTWEIGHT,parent:"axis",child:"titleFontWeight"},{property:s.AXIS_CHARACTERWIDTH,parent:"axis",child:"characterWidth"},{property:s.AXIS_TITLEMAXLENGTH,parent:"axis",child:"titleMaxLength"},{property:s.AXIS_TITLEOFFSET,parent:"axis",child:"titleOffset"},{property:s.LEGEND_ORIENT,parent:"legend",child:"orient"},{property:s.LEGEND_OFFSET,parent:"legend",child:"offset"},{property:s.LEGEND_VALUES,parent:"legend",child:"values"},{property:s.LEGEND_FORMAT,parent:"legend",child:"format"},{property:s.LEGEND_LABELALIGN,parent:"legend",child:"labelAlign"},{property:s.LEGEND_LABELBASELINE,parent:"legend",child:"labelBaseline"},{property:s.LEGEND_LABELFONT,parent:"legend",child:"labelFont"},{property:s.LEGEND_LABELFONTSIZE,parent:"legend",child:"labelFontSize"},{property:s.LEGEND_SHORTTIMELABELS,parent:"legend",child:"shortTimeLabels"},{property:s.LEGEND_SYMBOLCOLOR,parent:"legend",child:"symbolColor"},{property:s.LEGEND_SYMBOLSHAPE,parent:"legend",child:"symbolShape"},{property:s.LEGEND_SYMBOLSIZE,parent:"legend",child:"symbolSize"},{property:s.LEGEND_SYMBOLSTROKEWIDTH,parent:"legend",child:"symbolStrokeWidth"},{property:s.LEGEND_TITLE,parent:"legend",child:"title"},{property:s.LEGEND_TITLECOLOR,parent:"legend",child:"titleColor"},{property:s.LEGEND_TITLEFONT,parent:"legend",child:"titleFont"},{property:s.LEGEND_TITLEFONTSIZE,parent:"legend",child:"titleFontSize"},{property:s.LEGEND_TITLEFONTWEIGHT,parent:"legend",child:"titleFontWeight"}];var l=t.NESTED_ENCODING_PROPERTIES.reduce(function(e,r){return e[r.property]=r,e},{}),p=t.NESTED_ENCODING_PROPERTIES.reduce(function(e,r){var t=r.parent;return t in e||(e[t]=[]),e[r.parent].push(r),e},{});t.SCALE_PROPERTIES=p.scale.map(function(e){return e.property});var E=t.ENCODING_PROPERTIES.reduce(function(e,r){return e[r]=r,e},{});t.isEncodingProperty=i,t.getNestedEncodingProperty=a,t.getNestedEncodingPropertyChildren=o,t.isNestedEncodingProperty=c;var f=[{property:"bandSize",supportedScaleType:[u.ScaleType.ORDINAL]},{property:"clamp",supportedScaleType:[u.ScaleType.LINEAR,u.ScaleType.LOG,u.ScaleType.POW,u.ScaleType.TIME,u.ScaleType.UTC]},{property:"domain",supportedScaleType:[u.ScaleType.LINEAR,u.ScaleType.LOG,u.ScaleType.POW,u.ScaleType.QUANTILE,u.ScaleType.QUANTIZE,u.ScaleType.ORDINAL,u.ScaleType.SQRT,u.ScaleType.TIME,u.ScaleType.UTC]},{property:"exponent",supportedScaleType:[u.ScaleType.LOG,u.ScaleType.POW,u.ScaleType.SQRT]},{property:"nice",supportedScaleType:[u.ScaleType.LINEAR,u.ScaleType.LOG,u.ScaleType.POW,u.ScaleType.TIME,u.ScaleType.UTC]},{property:"range",supportedScaleType:[u.ScaleType.LINEAR,u.ScaleType.LOG,u.ScaleType.POW,u.ScaleType.QUANTILE,u.ScaleType.QUANTIZE,u.ScaleType.ORDINAL,u.ScaleType.SQRT,u.ScaleType.TIME,u.ScaleType.UTC]},{property:"round",supportedScaleType:[u.ScaleType.LINEAR,u.ScaleType.LOG,u.ScaleType.POW,u.ScaleType.SQRT,u.ScaleType.TIME,u.ScaleType.UTC]},{property:"useRawDomain",supportedScaleType:[u.ScaleType.LINEAR,u.ScaleType.LOG,u.ScaleType.POW,u.ScaleType.QUANTILE,u.ScaleType.QUANTIZE,u.ScaleType.ORDINAL,u.ScaleType.SQRT,u.ScaleType.TIME,u.ScaleType.UTC]},{property:"zero",supportedScaleType:[u.ScaleType.LINEAR,u.ScaleType.POW,u.ScaleType.SQRT]}];t.SUPPORTED_SCALE_PROPERTY_INDEX=f.reduce(function(e,r){var t=r.property;return e[t]=r.supportedScaleType,e},{})},{"vega-lite/src/scale":50}],22:[function(e,r,t){"use strict";function n(e){return l.contains([u.Type.NOMINAL,u.Type.ORDINAL],e.type)||!s.isEnumSpec(e.bin)&&!!e.bin||!s.isEnumSpec(e.timeUnit)&&!!e.timeUnit}function i(e){return e.type===u.Type.QUANTITATIVE&&!e.bin||e.type===u.Type.TEMPORAL&&!e.timeUnit}function a(e){var r=e.scale===!0||e.scale===s.SHORT_ENUM_SPEC?{}:e.scale,t=e.type,n=e.timeUnit;if(r&&void 0!==r.type)return r.type;if(!s.isEnumSpec(t)){if(t===u.Type.QUANTITATIVE)return o.ScaleType.LINEAR;if(t===u.Type.ORDINAL||t===u.Type.NOMINAL)return o.ScaleType.ORDINAL;if(t===u.Type.TEMPORAL){if(void 0!==n){if(s.isEnumSpec(n))return;return c.defaultScaleType(n)}return o.ScaleType.TIME}throw new Error("Unsupported type: "+t+" in scaleType")}}var o=e("vega-lite/src/scale"),c=e("vega-lite/src/timeunit"),u=e("vega-lite/src/type"),s=e("../enumspec"),l=e("../util");t.isDimension=n,t.isMeasure=i,t.scaleType=a},{"../enumspec":16,"../util":37,"vega-lite/src/scale":50,"vega-lite/src/timeunit":53,"vega-lite/src/type":54}],23:[function(e,r,t){"use strict";function n(e){return o.isObject(e)&&!!e.property}function i(e,r,t){e.forEach(function(e){n(e)?(r[e.property]=!0,t[e.property]=e.replace):r[e]=!0})}function a(e){return o.isArray(e)?e.map(function(e){if(n(e)){if(e.replace){var r=c.keys(e.replace).reduce(function(r,t){var n=e.replace[t];return(r[n]=r[n]||[]).push(t),r},{});return e.property+"["+c.keys(r).map(function(e){var t=r[e].sort();return t.join(",")+"=>"+e}).join(";")+"]"}return e.property}return e}).join(","):e}var o=e("datalib/src/util"),c=e("../util");t.REPLACE_BLANK_FIELDS={"*":""},t.REPLACE_XY_CHANNELS={x:"xy",y:"xy"},t.REPLACE_FACET_CHANNELS={row:"facet",column:"facet"},t.REPLACE_MARK_STYLE_CHANNELS={color:"style",opacity:"style",shape:"style",size:"style"},t.isExtendedGroupBy=n,t.parse=i,t.toString=a},{"../util":37,"datalib/src/util":8}],24:[function(e,r,t){"use strict";function n(e,r,t){e=s.extend({},i(e),{config:s.extend({},a.DEFAULT_QUERY_CONFIG,t,e.config)});var n=o.generate(e.spec,r,e.config),l=c.nest(n,e),p=u.rank(l,e,r,0);return{query:e,result:p}}function i(e){if(e.groupBy){var r={groupBy:e.groupBy};e.orderBy&&(r.orderGroupBy=e.orderBy);var t={spec:s.duplicate(e.spec),nest:[r]};return e.chooseBy&&(t.chooseBy=e.chooseBy),e.config&&(t.config=e.config),t}return s.duplicate(e)}var a=e("../config"),o=e("../generate"),c=e("../nest"),u=e("../ranking/ranking"),s=e("../util");t.encoding=e("./encoding"),t.groupBy=e("./groupby"),t.shorthand=e("./shorthand"),t.spec=e("./spec"),t.transform=e("./transform"),t.query=n,t.normalize=i},{"../config":9,"../generate":18,"../nest":20,"../ranking/ranking":34,"../util":37,"./encoding":22,"./groupby":23,"./shorthand":25,"./spec":26,"./transform":27}],25:[function(e,r,t){"use strict";function n(e){return A.keys(e).reduce(function(r,t){return r[t]=i(e[t]),r},{})}function i(e){return function(r){return void 0!==e[r]?e[r]:r}}function a(e,r){return S.isEnumSpec(e)?e["enum"]?S.SHORT_ENUM_SPEC+JSON.stringify(e["enum"]):S.SHORT_ENUM_SPEC:r?r(e):e}function o(e,r){return r?r(e):e}function c(e,r,n){void 0===r&&(r=t.INCLUDE_ALL),void 0===n&&(n={});var i=T.fromSpec(e);return u(i)}function u(e,r,n){void 0===r&&(r=t.INCLUDE_ALL),void 0===n&&(n={});var i=[];if(r[d.Property.MARK]&&i.push(a(e.mark,n[d.Property.MARK])),e.transform&&(r[d.Property.CALCULATE]&&void 0!==e.transform.calculate&&i.push("calculate:"+s(e.transform.calculate)),r[d.Property.FILTER]&&void 0!==e.transform.filter&&i.push("filter:"+JSON.stringify(e.transform.filter)),r[d.Property.FILTERINVALID]&&void 0!==e.transform.filterInvalid&&i.push("filterInvalid:"+e.transform.filterInvalid)),r[d.Property.STACK]){var o=T.stack(e);if(o){var c=A.extend({},r,{type:!1}),u=p(o.fieldEncQ,c,n),E=p(o.groupByEncQ,c,n);i.push("stack={field:"+u+","+(E?"by:"+E+",":"")+"offset:"+o.offset+"}")}}return i.push(e.encodings.reduce(function(e,t){if(t.autoCount!==!1){var i=l(t,r,n);i&&e.push(i)}return e},[]).sort().join("|")),i.join("|")}function s(e){return e.map(function(e){return"{"+e.field+":"+e.expr+"}"}).join(",")}function l(e,r,n){void 0===r&&(r=t.INCLUDE_ALL),void 0===n&&(n={});var i=[];r[d.Property.CHANNEL]&&i.push(a(e.channel,n[d.Property.CHANNEL]));var o=p(e,r,n);return o&&i.push(o),i.join(":")}function p(e,r,n){void 0===r&&(r=t.INCLUDE_ALL),void 0===n&&(n={});var i=null,c=null,u=[];if(r[d.Property.AGGREGATE]&&e.autoCount===!1)return"-";if(r[d.Property.AGGREGATE]&&e.aggregate&&!S.isEnumSpec(e.aggregate))i=o(e.aggregate,n[d.Property.AGGREGATE]);else if(r[d.Property.AGGREGATE]&&e.autoCount&&!S.isEnumSpec(e.autoCount))i=o("count",n[d.Property.AGGREGATE]);else if(r[d.Property.TIMEUNIT]&&e.timeUnit&&!S.isEnumSpec(e.timeUnit))i=o(e.timeUnit,n[d.Property.TIMEUNIT]);else if(r[d.Property.BIN]&&e.bin&&!S.isEnumSpec(e.bin))i="bin",r[d.Property.BIN_MAXBINS]&&e.bin.maxbins&&u.push({key:"maxbins",value:a(e.bin.maxbins,n[d.Property.BIN_MAXBINS])});else{for(var s=0,l=[d.Property.AGGREGATE,d.Property.AUTOCOUNT,d.Property.TIMEUNIT,d.Property.BIN];s<l.length;s++){var p=l[s];r[p]&&e[p]&&S.isEnumSpec(e[p])&&(i=S.SHORT_ENUM_SPEC+"",c=c||{},c[p]=e[p]["enum"]||e[p],p===d.Property.BIN&&r[d.Property.BIN_MAXBINS]&&e.bin.maxbins&&u.push({key:"maxbins",value:a(e.bin.maxbins,n[d.Property.BIN_MAXBINS])}))}c&&e.hasFn&&(c.hasFn=!0)}for(var T=function(i){if(!S.isEnumSpec(e.channel)&&!t.PROPERTY_SUPPORTED_CHANNELS[i][e.channel])return"continue";if(r[i])if(e[i]&&!S.isEnumSpec(e[i]))if(f.isString(e[i]))u.push({key:i+"",value:JSON.stringify(e[i])});else{var a=d.getNestedEncodingPropertyChildren(i),c=a.reduce(function(t,a){return r[a.property]&&void 0!==e[i][a.child]&&(t[a.child]=o(e[i][a.child],n[a.property])),t},{});A.keys(c).length>0&&u.push({key:i+"",value:JSON.stringify(c)})}else e[i]!==!1&&null!==e[i]||u.push({key:i+"",value:!1})},y=0,I=[d.Property.SCALE,d.Property.SORT,d.Property.AXIS,d.Property.LEGEND];y<I.length;y++){var h=I[y];T(h)}var g=r[d.Property.FIELD]?a(e.field||"*",n[d.Property.FIELD]):"...";if(r[d.Property.TYPE])if(S.isEnumSpec(e.type))g+=","+a(e.type,n[d.Property.TYPE]);else{var N=((e.type||E.Type.QUANTITATIVE)+"").substr(0,1);g+=","+a(N,n[d.Property.TYPE])}return g+=u.map(function(e){return","+e.key+"="+e.value}).join(""),i?i+(c?JSON.stringify(c):"")+"("+g+")":g}var E=e("vega-lite/src/type"),f=e("datalib/src/util"),T=e("./spec"),S=e("../enumspec"),d=e("../property"),A=e("../util");t.getReplacerIndex=n,t.getReplacer=i,t.value=a,t.replace=o,t.INCLUDE_ALL=d.DEFAULT_PROPERTY_PRECEDENCE.concat([d.Property.CALCULATE,d.Property.FILTER,d.Property.FILTERINVALID,d.Property.STACK]).reduce(function(e,r){return e[r]=!0,e},{}),t.vlSpec=c,t.PROPERTY_SUPPORTED_CHANNELS={axis:{x:!0,y:!0,row:!0,column:!0},legend:{color:!0,opacity:!0,size:!0,shape:!0},scale:{x:!0,y:!0,color:!0,opacity:!0,row:!0,column:!0,size:!0,shape:!0},sort:{x:!0,y:!0,path:!0,order:!0}},t.spec=u,t.calculate=s,t.encoding=l,t.fieldDef=p},{"../enumspec":16,"../property":21,"../util":37,"./spec":26,"datalib/src/util":8,"vega-lite/src/type":54}],26:[function(e,r,t){"use strict";function n(e){return p.extend(e.data?{data:e.data}:{},e.transform?{transform:e.transform}:{},{mark:e.mark,encodings:p.keys(e.encoding).map(function(r){for(var t={channel:r},n=e.encoding[r],i=0,a=l.ENCODING_PROPERTIES;i<a.length;i++){var o=a[i];l.isNestedEncodingProperty(o)||void 0===n[o]||(t[o]=n[o]),p.contains([l.Property.SCALE,l.Property.AXIS,l.Property.LEGEND],o)&&null===t[o]&&(t[o]=!1)}return t})},e.config?{config:e.config}:{})}function i(e){return p.some(e.encodings,function(e){return!s.isEnumSpec(e.aggregate)&&!!e.aggregate||e.autoCount===!0})}function a(e){var r=e.config,t=r&&r.mark?r.mark.stacked:void 0;if(p.contains([u.StackOffset.NONE,null,!1],t))return null;if(!p.contains([c.BAR,c.AREA],e.mark))return null;if(!i(e))return null;var n=e.encodings.reduce(function(e,r){return p.contains(o.STACK_GROUP_CHANNELS,r.channel)&&!r.aggregate&&e.push(r.channel),e},[]);if(0===n.length)return null;var a=e.encodings.reduce(function(e,r){return e||(r.channel===o.Channel.X?r:null)},null),s=e.encodings.reduce(function(e,r){return e||(r.channel===o.Channel.Y?r:null)},null),l=!(!a||!a.aggregate&&!a.autoCount),E=!(!s||!s.aggregate&&!s.autoCount);return l!==E?{groupbyChannel:l?s?o.Y:null:a?o.X:null,groupByEncQ:l?s:a,fieldChannel:l?o.X:o.Y,fieldEncQ:l?a:s,stackByChannels:n,offset:t||u.StackOffset.ZERO}:null}var o=e("vega-lite/src/channel"),c=e("vega-lite/src/mark"),u=e("vega-lite/src/stack"),s=e("../enumspec"),l=e("../property"),p=e("../util");
t.fromSpec=n,t.isAggregate=i,t.stack=a},{"../enumspec":16,"../property":21,"../util":37,"vega-lite/src/channel":46,"vega-lite/src/mark":49,"vega-lite/src/stack":52}],27:[function(e,r,t){"use strict"},{}],28:[function(e,r,t){"use strict";function n(e,r,t){var n=i(e,r,t);return{score:n.score,features:[n]}}function i(e,r,n){var i=e.getEncodings();if(e.isAggregate()){var s=function(e){return e.type===o.Type.QUANTITATIVE&&!e.bin&&!e.aggregate&&!e.autoCount||e.type===o.Type.TEMPORAL&&!e.timeUnit};if(c.some(i,s))return{type:t.name,score:.1,feature:"Aggregate with raw continuous"};if(c.some(i,u.isDimension)){var l=c.some(i,function(e){return e.aggregate===a.AggregateOp.COUNT||e.autoCount===!0}),p=c.some(i,function(e){return!!e.bin});return l?{type:t.name,score:.8,feature:"Aggregate with count"}:p?{type:t.name,score:.7,feature:"Aggregate with bin but without count"}:{type:t.name,score:.9,feature:"Aggregate without count and without bin"}}return{type:t.name,score:.3,feature:"Aggregate without dimension"}}return c.some(i,u.isMeasure)?{type:t.name,score:1,feature:"Raw with measure"}:{type:t.name,score:.2,feature:"Raw without measure"}}var a=e("vega-lite/src/aggregate"),o=e("vega-lite/src/type"),c=e("../util"),u=e("../query/encoding");t.name="aggregationQuality",t.score=n},{"../query/encoding":22,"../util":37,"vega-lite/src/aggregate":43,"vega-lite/src/type":54}],29:[function(e,r,t){"use strict";var n,i=e("vega-lite/src/channel"),a=e("../../config"),o=e("../../query/shorthand"),c=e("../../util"),u=e("./effectiveness"),s=e("./type");!function(e){function r(){var e={},r={x:0,y:0,size:-.575,color:-.725,opacity:-.85,text:-.875,row:-.9,column:-.9,shape:-2.5,detail:-3};[s.Q,s.BIN_Q,s.T,s.TIMEUNIT_T,s.TIMEUNIT_O,s.O].forEach(function(n){c.keys(r).forEach(function(i){e[t(n,i)]=r[i]})}),[s.BIN_Q,s.TIMEUNIT_T,s.TIMEUNIT_O,s.O].forEach(function(r){[i.Channel.ROW,i.Channel.COLUMN].forEach(function(n){e[t(r,n)]+=.15})});var n={x:0,y:0,color:-.6,shape:-.65,row:-.7,column:-.7,text:-.8,size:-1.8,detail:-2,opacity:-2.1};return c.keys(n).forEach(function(r){e[t(s.N,r)]=n[r]}),e}function t(e,r){return e+"_"+r}function n(r,n,i){var a=r.getEncodings().reduce(function(e,r){var t=o.fieldDef(r);return(e[t]=e[t]||[]).push(r),e},{}),l=[];return c.forEach(a,function(r){var n=r.reduce(function(r,n){var i=s.getExtendedType(n),a=t(i,n.channel),o=u.getFeatureScore(e.TYPE_CHANNEL,a);return null===r||o.score>r.score?o:r},null);l.push(n)}),l}e.TYPE_CHANNEL="typeChannel",e.init=r,e.featurize=t,e.getScore=n}(n=t.TypeChannelScore||(t.TypeChannelScore={}));var l;!function(e){function r(e){void 0===e&&(e={}),e=c.extend({},a.DEFAULT_QUERY_CONFIG,e);var r={},t=[{feature:s.BIN_Q,opt:"preferredBinAxis"},{feature:s.T,opt:"preferredTemporalAxis"},{feature:s.TIMEUNIT_T,opt:"preferredTemporalAxis"},{feature:s.TIMEUNIT_O,opt:"preferredTemporalAxis"},{feature:s.O,opt:"preferredOrdinalAxis"},{feature:s.N,opt:"preferredNominalAxis"}];return t.forEach(function(t){e[t.opt]===i.Channel.X?r[t.feature+"_"+i.Channel.Y]=-.01:e[t.opt]===i.Channel.Y&&(r[t.feature+"_"+i.Channel.X]=-.01)}),r}function t(e,r){return e+"_"+r}function n(r,n,i){return r.getEncodings().reduce(function(r,n){var i=s.getExtendedType(n),a=t(i,n.channel),o=u.getFeatureScore(e.PREFERRED_AXIS,a);return o&&r.push(o),r},[])}e.PREFERRED_AXIS="preferredAxis",e.init=r,e.featurize=t,e.getScore=n}(l=t.PreferredAxisScore||(t.PreferredAxisScore={}));var p;!function(e){function r(e){e=c.extend({},a.DEFAULT_QUERY_CONFIG,e);var r={};return e.preferredFacet===i.Channel.ROW?r[i.Channel.COLUMN]=-.01:e.preferredFacet===i.Channel.COLUMN&&(r[i.Channel.ROW]=-.01),r}function t(r,t,n){return r.getEncodings().reduce(function(r,t){var n=u.getFeatureScore(e.PREFERRED_FACET,t.channel);return n&&r.push(n),r},[])}e.PREFERRED_FACET="preferredFacet",e.init=r,e.getScore=t}(p=t.PreferredFacetScore||(t.PreferredFacetScore={}));var E;!function(e){function r(){return{bar_size:-2,tick_size:-2}}function t(r,t,n){var i=r.getMark();return r.getEncodings().reduce(function(r,t){var n=i+"_"+t.channel,a=u.getFeatureScore(e.MARK_CHANNEL,n);return a&&r.push(a),r},[])}e.MARK_CHANNEL="markChannel",e.init=r,e.getScore=t}(E=t.MarkChannelScore||(t.MarkChannelScore={}));var f;!function(e){function r(){return{row:-2,column:-2,color:0,opacity:0,size:0,shape:0}}function t(r,t,n){return r.isAggregate()&&r.getEncodings().reduce(function(r,t){if(!t.aggregate&&!t.autoCount){var n=u.getFeatureScore(e.DIMENSION,t.channel+"");if(n.score>r.score)return n}return r},{type:e.DIMENSION,feature:"No Dimension",score:-5}),[]}e.DIMENSION="dimension",e.init=r,e.getScore=t}(f=t.DimensionScore||(t.DimensionScore={}))},{"../../config":9,"../../query/shorthand":25,"../../util":37,"./effectiveness":30,"./type":32,"vega-lite/src/channel":46}],30:[function(e,r,t){"use strict";function n(e,r){var n=t.FEATURE_INDEX[e][r];return void 0!==n?{score:n,type:e,feature:r}:null}function i(e){u.push(e),t.FEATURE_INDEX[e.type]=e.init()}function a(e,r,t){var n=u.reduce(function(n,i){var a=i.getScore(e,r,t);return n.concat(a)},[]);return{score:n.reduce(function(e,r){return e+r.score},0),features:n}}var o=e("./channel"),c=e("./mark");t.FEATURE_INDEX={};var u=[];t.getFeatureScore=n,t.addFeatureFactory=i,i({type:o.TypeChannelScore.TYPE_CHANNEL,init:o.TypeChannelScore.init,getScore:o.TypeChannelScore.getScore}),i({type:o.PreferredAxisScore.PREFERRED_AXIS,init:o.PreferredAxisScore.init,getScore:o.PreferredAxisScore.getScore}),i({type:o.PreferredFacetScore.PREFERRED_FACET,init:o.PreferredFacetScore.init,getScore:o.PreferredFacetScore.getScore}),i({type:o.MarkChannelScore.MARK_CHANNEL,init:o.MarkChannelScore.init,getScore:o.MarkChannelScore.getScore}),i({type:c.MarkScore.MARK_SCORE,init:c.MarkScore.init,getScore:c.MarkScore.getScore}),Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a},{"./channel":29,"./mark":31}],31:[function(e,r,t){"use strict";var n,i=e("vega-lite/src/channel"),a=e("vega-lite/src/mark"),o=e("../../util"),c=e("./effectiveness"),u=e("./type");!function(e){function r(e,r,t,n){return e+"_"+r+"_"+t+"_"+n}function t(){var e=[u.Q,u.T],t=[u.BIN_Q,u.TIMEUNIT_O,u.O,u.N],n=t.concat([u.NONE]),i={};return e.forEach(function(t){e.forEach(function(e){var n={point:0,text:-.2,tick:-.5,rect:-1,bar:-2,line:-2,area:-2,rule:-2.5};o.forEach(n,function(n,a){var o=r(t,e,!0,a);i[o]=n});var a={point:0,text:-.2,tick:-.5,bar:-2,line:-2,area:-2,rule:-2.5};o.forEach(a,function(n,a){var o=r(t,e,!1,a);i[o]=n})})}),e.forEach(function(e){n.forEach(function(t){var n={tick:0,point:-.2,text:-.5,bar:-2,line:-2,area:-2,rule:-2.5};o.forEach(n,function(n,a){var o=r(e,t,!0,a);i[o]=n;var c=r(t,e,!0,a);i[c]=n})}),[u.TIMEUNIT_T].forEach(function(t){var n={point:0,text:-.5,tick:-1,bar:-2,line:-2,area:-2,rule:-2.5};o.forEach(n,function(n,a){var o=r(e,t,!0,a);i[o]=n;var c=r(t,e,!0,a);i[c]=n})}),[u.NONE,u.N,u.O].forEach(function(t){var n={bar:0,point:-.2,tick:-.25,text:-.3,line:-2,area:-2,rule:-2.5};o.forEach(n,function(n,a){var o=r(e,t,!1,a);i[o]=n;var c=r(t,e,!1,a);i[c]=n})}),[u.BIN_Q].forEach(function(t){var n={bar:0,point:-.2,tick:-.25,text:-.3,line:-.5,area:-.5,rule:-2.5};o.forEach(n,function(n,a){var o=r(e,t,!1,a);i[o]=n;var c=r(t,e,!1,a);i[c]=n})}),[u.TIMEUNIT_T,u.TIMEUNIT_O].forEach(function(t){var n={line:0,area:-.1,bar:-.2,point:-.3,tick:-.35,text:-.4,rule:-2.5};o.forEach(n,function(n,a){var o=r(e,t,!1,a);i[o]=n;var c=r(t,e,!1,a);i[c]=n})})}),[u.TIMEUNIT_T].forEach(function(e){[u.TIMEUNIT_T].forEach(function(t){var n={point:0,rect:-.1,text:-.5,tick:-1,bar:-2,line:-2,area:-2,rule:-2.5};o.forEach(n,function(n,a){var o=r(e,t,!0,a);i[o]=n}),o.forEach(n,function(n,a){var o=r(e,t,!1,a);i[o]=n})}),n.forEach(function(t){var n={tick:0,point:-.2,text:-.5,rect:-1,bar:-2,line:-2,area:-2,rule:-2.5};o.forEach(n,function(n,a){var o=r(e,t,!0,a);i[o]=n}),o.forEach(n,function(n,a){var o=r(t,e,!0,a);i[o]=n}),o.forEach(n,function(n,a){var o=r(e,t,!1,a);i[o]=n}),o.forEach(n,function(n,a){var o=r(t,e,!1,a);i[o]=n})})}),n.forEach(function(e){n.forEach(function(t){var n={point:0,rect:0,text:-.1,tick:-1,bar:-2,line:-2,area:-2,rule:-2.5};o.forEach(n,function(n,a){var o=r(e,t,!0,a);i[o]=n}),o.forEach(n,function(n,a){var o=r(e,t,!1,a);i[o]=n})})}),i}function n(r,t,n){var o=r.getMark();o!==a.Mark.CIRCLE&&o!==a.Mark.SQUARE||(o=a.Mark.POINT);var s=r.getEncodingQueryByChannel(i.Channel.X),l=s?u.getExtendedType(s):u.NONE,p=r.getEncodingQueryByChannel(i.Channel.Y),E=p?u.getExtendedType(p):u.NONE,f=!r.isAggregate(),T=l+"_"+E+"_"+f+"_"+o,S=c.getFeatureScore(e.MARK_SCORE,T);return[S]}e.MARK_SCORE="markScore",e.featurize=r,e.init=t,e.getScore=n}(n=t.MarkScore||(t.MarkScore={}))},{"../../util":37,"./effectiveness":30,"./type":32,"vega-lite/src/channel":46,"vega-lite/src/mark":49}],32:[function(e,r,t){"use strict";function n(e){return e.bin?c.BIN_Q:e.timeUnit?o.scaleType(e)===i.ScaleType.ORDINAL?c.TIMEUNIT_O:c.TIMEUNIT_T:e.type}var i=e("vega-lite/src/scale"),a=e("vega-lite/src/type"),o=e("../../query/encoding");!function(e){e[e.Q=a.Type.QUANTITATIVE]="Q",e[e.BIN_Q="bin_"+a.Type.QUANTITATIVE]="BIN_Q",e[e.T=a.Type.TEMPORAL]="T",e[e.TIMEUNIT_T="timeUnit_time"]="TIMEUNIT_T",e[e.TIMEUNIT_O="timeUnit_"+a.Type.ORDINAL]="TIMEUNIT_O",e[e.O=a.Type.ORDINAL]="O",e[e.N=a.Type.NOMINAL]="N",e[e.NONE="-"]="NONE"}(t.ExtendedType||(t.ExtendedType={}));var c=t.ExtendedType;t.Q=c.Q,t.BIN_Q=c.BIN_Q,t.T=c.T,t.TIMEUNIT_T=c.TIMEUNIT_T,t.TIMEUNIT_O=c.TIMEUNIT_O,t.O=c.O,t.N=c.N,t.NONE=c.NONE,t.getExtendedType=n},{"../../query/encoding":22,"vega-lite/src/scale":50,"vega-lite/src/type":54}],33:[function(e,r,t){"use strict";function n(e,r,t){var n=e.enumSpecIndex.encodingIndicesByProperty[i.Property.FIELD];if(!n)return{score:0,features:[]};for(var a=e.specQuery.encodings,o=r.fieldSchemas.length,c=[],u=0,s=1,l=n.length-1;l>=0;l--){var p=n[l],E=a[p].field,f=e.enumSpecIndex.encodings[p].field,T=r.fieldSchema(E).index,S=-T*s;u+=S,c.push({score:S,type:"fieldOrder",feature:"field "+f.name+" is "+E+" (#"+T+" in the schema)"}),s*=o}return{score:u,features:c}}var i=e("../property");t.name="fieldOrder",t.score=n},{"../property":21}],34:[function(e,r,t){"use strict";function n(e,r){l[e]=r}function i(e){return l[e]}function a(e,r,t,n){return r.nest&&n!==r.nest.length?(e.items.forEach(function(e){a(e,r,t,n+1)}),r.nest[n].orderGroupBy&&e.items.sort(c(r.nest[n].orderGroupBy,t,r.config))):(r.orderBy||r.chooseBy)&&(e.items.sort(o(r.orderBy||r.chooseBy,t,r.config)),r.chooseBy&&e.items.length>0&&e.items.splice(1)),e}function o(e,r,t){return function(n,i){return e instanceof Array?u(e,n,i,r,t):u([e],n,i,r,t)}}function c(e,r,t){return function(n,i){var a=n.getTopSpecQueryModel(),o=i.getTopSpecQueryModel();return e instanceof Array?u(e,a,o,r,t):u([e],a,o,r,t)}}function u(e,r,t,n,i){for(var a=0;a<e.length;a++){var o=s(t,e[a],n,i).score-s(r,e[a],n,i).score;if(0!==o)return o}return 0}function s(e,r,t,n){if(void 0!==e.getRankingScore(r))return e.getRankingScore(r);var a=i(r),o=a(e,t,n);return e.setRankingScore(r,o),o}t.effectiveness=e("./effectiveness/effectiveness"),t.aggregation=e("./aggregation"),t.fieldOrder=e("./fieldorder");var l={};t.register=n,t.get=i,t.rank=a,t.comparatorFactory=o,t.groupComparatorFactory=c,t.getScore=s,t.EFFECTIVENESS="effectiveness",n(t.EFFECTIVENESS,t.effectiveness["default"]),n(t.aggregation.name,t.aggregation.score),n(t.fieldOrder.name,t.fieldOrder.score)},{"./aggregation":28,"./effectiveness/effectiveness":30,"./fieldorder":33}],35:[function(e,r,t){"use strict";function n(e,r){var t=E({min:r.min,max:r.max,maxbins:e}),n=T.extend({},r);return n.unique=a(t,r.unique),n.distinct=(t.stop-t.start)/t.step,n.min=t.start,n.max=t.stop,n}function i(e,r){var t=T.extend({},r),n={};return T.keys(r.unique).forEach(function(t){var i,a="null"===t?null:new Date(t);i=null===a?null:isNaN(a.getTime())?"Invalid Date":(e===s.TimeUnit.DAY?a.getDay():s.convert(e,a)).toString(),n[i]=(n[i]||0)+r.unique[t]}),t.unique=n,t.distinct=T.keys(n).length,t}function a(e,r){var t={};for(var n in r){var i=void 0;i=null===n?null:isNaN(Number(n))?NaN:e.value(Number(n)),t[i]=(t[i]||0)+r[n]}return t}function o(e,r){return r.reduce(function(r,t){return e[t]?r+1:r},0)}var c=e("vega-lite/src/type"),u=e("vega-lite/src/bin"),s=e("vega-lite/src/timeunit"),l=e("datalib/src/stats"),p=e("datalib/src/import/type"),E=e("datalib/src/bins/bins"),f=e("./config"),T=e("./util"),S=function(){function e(e){this._fieldSchemas=e,this._fieldSchemaIndex=e.reduce(function(e,r){return e[r.field]=r,e},{})}return e.build=function(r,t){void 0===t&&(t={}),t=T.extend({},f.DEFAULT_QUERY_CONFIG,t);var a=l.summary(r),o=p.inferAll(r),u=a.map(function(e){var n,i=e.field,a=o[i],u=e.distinct;if(a===d.NUMBER)n=c.Type.QUANTITATIVE;else if(a===d.INTEGER)n=u<t.numberNominalLimit&&u/e.count<t.numberNominalProportion?c.Type.NOMINAL:c.Type.QUANTITATIVE;else if(a===d.DATE){n=c.Type.TEMPORAL,e.min=new Date(r[0][i]),e.max=new Date(r[0][i]);for(var s=0;s<r.length;s++){var l=new Date(r[s][i]).getTime();l<e.min.getTime()&&(e.min=new Date(l)),l>e.max.getTime()&&(e.max=new Date(l))}}else n=c.Type.NOMINAL;return{field:i,type:n,primitiveType:a,stats:e,timeStats:{},binStats:{}}}),s={nominal:0,ordinal:1,temporal:2,quantitative:3};u.sort(function(e,r){return s[e.type]<s[r.type]?-1:s[e.type]>s[r.type]?1:e.field.localeCompare(r.field)}),u.forEach(function(e,r){return e.index=r});for(var E=0,S=u;E<S.length;E++){var A=S[E];if(A.type===c.Type.QUANTITATIVE)for(var y=0,I=t.maxBinsList;y<I.length;y++){var h=I[y];A.binStats[h]=n(h,A.stats)}else if(A.type===c.Type.TEMPORAL)for(var g=0,N=t.timeUnits;g<N.length;g++){var L=N[g];void 0!==L&&(A.timeStats[L]=i(L,A.stats))}}return new e(u)},e.prototype.fields=function(){return this._fieldSchemas.map(function(e){return e.field})},Object.defineProperty(e.prototype,"fieldSchemas",{get:function(){return this._fieldSchemas},enumerable:!0,configurable:!0}),e.prototype.fieldSchema=function(e){return this._fieldSchemaIndex[e]},e.prototype.primitiveType=function(e){return this._fieldSchemaIndex[e]?this._fieldSchemaIndex[e].primitiveType:null},e.prototype.type=function(e){return this._fieldSchemaIndex[e]?this._fieldSchemaIndex[e].type:null},e.prototype.cardinality=function(e,r,t){void 0===r&&(r=!0),void 0===t&&(t=!1);var a=this._fieldSchemaIndex[e.field];if(e.aggregate||e.autoCount)return 1;if(e.bin){var c;c="boolean"==typeof e.bin?{maxbins:u.autoMaxBins(e.channel)}:e.bin;var l=c.maxbins;return a.binStats[l]||(a.binStats[l]=n(l,a.stats)),a.binStats[l].distinct}if(e.timeUnit){if(r)switch(e.timeUnit){case s.TimeUnit.SECONDS:return 60;case s.TimeUnit.MINUTES:return 60;case s.TimeUnit.HOURS:return 24;case s.TimeUnit.DAY:return 7;case s.TimeUnit.DATE:return 31;case s.TimeUnit.MONTH:return 12;case s.TimeUnit.QUARTER:return 4;case s.TimeUnit.MILLISECONDS:return 1e3}var p=e.timeUnit,E=a.timeStats;return E[p]||(E[p]=i(e.timeUnit,a.stats)),t?E[p].distinct-o(E[p].unique,["Invalid Date",null]):E[p].distinct}return a?t?a.stats.distinct-o(a.stats.unique,[NaN,null]):a.stats.distinct:null},e.prototype.timeUnitHasVariation=function(e){if(e.timeUnit){if(e.timeUnit===s.TimeUnit.DAY){var r=T.extend({},e,{timeUnit:s.TimeUnit.DATE});if(this.cardinality(r,!1,!0)<=1)return!1}for(var t=e.timeUnit,n=0,i=s.SINGLE_TIMEUNITS;n<i.length;n++){var a=i[n];if(s.containsTimeUnit(t,a)&&(e.timeUnit=a,this.cardinality(e,!1,!0)<=1))return!1}return!0}},e.prototype.domain=function(e){var r=this._fieldSchemaIndex[e.field],t=T.keys(r.stats.unique);return r.type===c.Type.QUANTITATIVE?[+r.stats.min,+r.stats.max]:r.primitiveType===d.DATE?[r.stats.min,r.stats.max]:r.primitiveType===d.INTEGER||r.primitiveType===d.NUMBER?(t=t.map(function(e){return+e}),t.sort(T.cmp)):t.map(function(e){return"null"===e?null:e}).sort(T.cmp)},e.prototype.stats=function(e){var r=this._fieldSchemaIndex[e.field];return r?r.stats:null},e}();t.Schema=S,function(e){e[e.STRING="string"]="STRING",e[e.NUMBER="number"]="NUMBER",e[e.INTEGER="integer"]="INTEGER",e[e.BOOLEAN="boolean"]="BOOLEAN",e[e.DATE="date"]="DATE"}(t.PrimitiveType||(t.PrimitiveType={}));var d=t.PrimitiveType},{"./config":9,"./util":37,"datalib/src/bins/bins":3,"datalib/src/import/type":5,"datalib/src/stats":6,"vega-lite/src/bin":45,"vega-lite/src/timeunit":53,"vega-lite/src/type":54}],36:[function(e,r,t){"use strict";function n(e,r,t){var n={};return e=e.map(function(e){return t.smallBandSizeForHighCardinalityOrFacet&&(e=i(e,r,n,t)),t.nominalColorScaleForHighCardinality&&(e=a(e,r,n,t)),t.xAxisOnTopForHighYCardinalityWithoutColumn&&(e=o(e,r,n,t)),e})}function i(e,r,t,n){[u.Channel.ROW,u.Channel.Y,u.Channel.COLUMN,u.Channel.X].forEach(function(r){t[r]=e.getEncodingQueryByChannel(r)});var i=t[u.Channel.Y];void 0!==i&&(t[u.Channel.ROW]||r.cardinality(i)>n.smallBandSizeForHighCardinalityOrFacet.maxCardinality)&&(void 0===i.scale&&(i.scale={}),i.scale&&E.contains([s.ScaleType.ORDINAL,void 0],p.scaleType(i))&&(i.scale.bandSize||(i.scale.bandSize=12)));var a=t[u.Channel.X];return void 0!==a&&(t[u.Channel.COLUMN]||r.cardinality(a)>n.smallBandSizeForHighCardinalityOrFacet.maxCardinality)&&(void 0===a.scale&&(a.scale={}),a.scale&&E.contains([s.ScaleType.ORDINAL,void 0],p.scaleType(a))&&(a.scale.bandSize||(a.scale.bandSize=12))),e}function a(e,r,t,n){t[u.Channel.COLOR]=e.getEncodingQueryByChannel(u.Channel.COLOR);var i=t[u.Channel.COLOR];return void 0!==i&&i.type===l.Type.NOMINAL&&r.cardinality(i)>n.nominalColorScaleForHighCardinality.maxCardinality&&(void 0===i.scale&&(i.scale={}),i.scale&&(i.scale.range||(i.scale.range=n.nominalColorScaleForHighCardinality.palette))),e}function o(e,r,t,n){if([u.Channel.COLUMN,u.Channel.X,u.Channel.Y].forEach(function(r){t[r]=e.getEncodingQueryByChannel(r)}),void 0===t[u.Channel.COLUMN]){var i=t[u.Channel.X],a=t[u.Channel.Y];void 0!==a&&a.field&&p.scaleType(a)===s.ScaleType.ORDINAL&&void 0!==i&&r.cardinality(a)>n.xAxisOnTopForHighYCardinalityWithoutColumn.maxCardinality&&(void 0===i.axis&&(i.axis={}),i.axis&&!i.axis.orient&&(i.axis.orient=c.AxisOrient.TOP))}return e}var c=e("vega-lite/src/axis"),u=e("vega-lite/src/channel"),s=e("vega-lite/src/scale"),l=e("vega-lite/src/type"),p=e("./query/encoding"),E=e("./util");t.stylize=n,t.smallBandSizeForHighCardinalityOrFacet=i,t.nominalColorScaleForHighCardinality=a,t.xAxisOnTopForHighYCardinalityWithoutColumn=o},{"./query/encoding":22,"./util":37,"vega-lite/src/axis":44,"vega-lite/src/channel":46,"vega-lite/src/scale":50,"vega-lite/src/type":54}],37:[function(e,r,t){"use strict";function n(e,r){return-1!==e.indexOf(r)}function i(e,r){var t,n=0;for(t in e)if(!r(e[t],t,n++))return!1;return!0}function a(e,r,t){if(e.forEach)e.forEach.call(t,r);else for(var n in e)r.call(t,e[n],n,e)}function o(e,r){var t,n=0;for(t in e)if(r(e[t],t,n++))return!0;return!1}function c(e,r){return e.map(function(e){return s.isArray(e)?c(e,r):r(e)})}function u(e,r){return e.filter(function(e){return!n(r,e)})}var s=e("datalib/src/util"),l=e("datalib/src/util");t.cmp=l.cmp,t.keys=l.keys,t.duplicate=l.duplicate,t.extend=l.extend,t.isObject=l.isObject,t.isArray=l.isArray,t.contains=n,t.every=i,t.forEach=a,t.some=o,t.nestedMap=c,t.without=u},{"datalib/src/util":8}],38:[function(e,r,t){(function(e){function t(e,r){var t,n="";for(t=0;e>t;++t)n+=r;return n}function n(e,r,t){var n=0,i=e.split(u);return e=t?(i=i.reverse()).filter(function(e){return n+=e.length,r>=n}).reverse():i.filter(function(e){return n+=e.length,r>=n}),e.length?e.join("").trim():i[0].slice(0,r)}var i=r.exports,a="__name__";i.namedfunc=function(e,r){return r[a]=e,r},i.name=function(e){return null==e?null:e[a]},i.identity=function(e){return e},i["true"]=i.namedfunc("true",function(){return!0}),i["false"]=i.namedfunc("false",function(){return!1}),i.duplicate=function(e){return JSON.parse(JSON.stringify(e))},i.equal=function(e,r){return JSON.stringify(e)===JSON.stringify(r)},i.extend=function(e){for(var r,t,n=1,i=arguments.length;i>n;++n){r=arguments[n];for(t in r)e[t]=r[t]}return e},i.length=function(e){return null!=e&&null!=e.length?e.length:null},i.keys=function(e){var r,t=[];for(r in e)t.push(r);return t},i.vals=function(e){var r,t=[];for(r in e)t.push(e[r]);return t},i.toMap=function(e,r){return(r=i.$(r))?e.reduce(function(e,t){return e[r(t)]=1,e},{}):e.reduce(function(e,r){return e[r]=1,e},{})},i.keystr=function(e){var r=e.length;if(!r)return"";for(var t=String(e[0]),n=1;r>n;++n)t+="|"+String(e[n]);return t};var o=Object.prototype.toString;i.isObject=function(e){return e===Object(e)},i.isFunction=function(e){return"[object Function]"===o.call(e)},i.isString=function(e){return"string"==typeof value||"[object String]"===o.call(e)},i.isArray=Array.isArray||function(e){return"[object Array]"===o.call(e)},i.isNumber=function(e){return"number"==typeof e||"[object Number]"===o.call(e)},i.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==o.call(e)},i.isDate=function(e){return"[object Date]"===o.call(e)},i.isValid=function(e){return null!=e&&e===e},i.isBuffer="function"==typeof e&&e.isBuffer||i["false"],i.number=function(e){return null==e||""===e?null:+e},i["boolean"]=function(e){return null==e||""===e?null:"false"===e?!1:!!e},i.date=function(e,r){var t=r?r:Date;return null==e||""===e?null:t.parse(e)},i.array=function(e){return null!=e?i.isArray(e)?e:[e]:[]},i.str=function(e){return i.isArray(e)?"["+e.map(i.str)+"]":i.isObject(e)||i.isString(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e};var c=/\[(.*?)\]|[^.\[]+/g;i.field=function(e){return String(e).match(c).map(function(e){return"["!==e[0]?e:"'"!==e[1]&&'"'!==e[1]?e.slice(1,-1):e.slice(2,-2).replace(/\\(["'])/g,"$1")})},i.accessor=function(e){return null==e||i.isFunction(e)?e:i.namedfunc(e,Function("x","return x["+i.field(e).map(i.str).join("][")+"];"))},i.$=i.accessor,i.mutator=function(e){var r;return i.isString(e)&&(r=i.field(e)).length>1?function(e,t){for(var n=0;n<r.length-1;++n)e=e[r[n]];e[r[n]]=t}:function(r,t){r[e]=t}},i.$func=function(e,r){return function(t){t=i.$(t)||i.identity;var n=e+(i.name(t)?"_"+i.name(t):"");return i.namedfunc(n,function(e){return r(t(e))})}},i.$valid=i.$func("valid",i.isValid),i.$length=i.$func("length",i.length),i.$in=function(e,r){e=i.$(e);var t=i.isArray(r)?i.toMap(r):r;return function(r){return!!t[e(r)]}},i.comparator=function(e){var r=[];return void 0===e&&(e=[]),e=i.array(e).map(function(e){var t=1;return"-"===e[0]?(t=-1,e=e.slice(1)):"+"===e[0]&&(t=1,e=e.slice(1)),r.push(t),i.accessor(e)}),function(t,n){var a,o,c,u;for(a=0,o=e.length;o>a;++a)if(c=e[a],u=i.cmp(c(t),c(n)))return u*r[a];return 0}},i.cmp=function(e,r){return(r>e||null==e)&&null!=r?-1:(e>r||null==r)&&null!=e?1:(r=r instanceof Date?+r:r,(e=e instanceof Date?+e:e)!==e&&r===r?-1:r!==r&&e===e?1:0)},i.numcmp=function(e,r){return e-r},i.stablesort=function(e,r,t){var n=e.reduce(function(e,r,n){return e[t(r)]=n,e},{});return e.sort(function(e,i){var a=r(e),o=r(i);return o>a?-1:a>o?1:n[t(e)]-n[t(i)]}),e},i.permute=function(e){for(var r,t,n=e.length;n;)t=Math.floor(Math.random()*n--),r=e[n],e[n]=e[t],e[t]=r},i.pad=function(e,r,n,i){i=i||" ";var a=r-e.length;if(0>=a)return e;switch(n){case"left":return t(a,i)+e;case"middle":case"center":return t(Math.floor(a/2),i)+e+t(Math.ceil(a/2),i);default:return e+t(a,i)}},i.truncate=function(e,r,t,i,a){var o=e.length;if(r>=o)return e;a=void 0!==a?String(a):"â€¦";var c=Math.max(0,r-a.length);switch(t){case"left":return a+(i?n(e,c,1):e.slice(o-c));case"middle":case"center":var u=Math.ceil(c/2),s=Math.floor(c/2);return(i?n(e,u):e.slice(0,u))+a+(i?n(e,s,1):e.slice(o-s));default:return(i?n(e,c):e.slice(0,c))+a}};var u=/([\u0009\u000A\u000B\u000C\u000D\u0020\u00A0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u2028\u2029\u3000\uFEFF])/}).call(this,e("buffer").Buffer)},{buffer:1}],39:[function(e,r,t){var n="undefined"!=typeof JSON?JSON:e("jsonify");r.exports=function(e,r){r||(r={}),"function"==typeof r&&(r={cmp:r});var t=r.space||"";"number"==typeof t&&(t=Array(t+1).join(" "));var o="boolean"==typeof r.cycles?r.cycles:!1,c=r.replacer||function(e,r){return r},u=r.cmp&&function(e){return function(r){return function(t,n){var i={key:t,value:r[t]},a={key:n,value:r[n]};return e(i,a)}}}(r.cmp),s=[];return function l(e,r,p,E){var f=t?"\n"+new Array(E+1).join(t):"",T=t?": ":":";if(p&&p.toJSON&&"function"==typeof p.toJSON&&(p=p.toJSON()),p=c.call(e,r,p),void 0!==p){if("object"!=typeof p||null===p)return n.stringify(p);if(i(p)){for(var S=[],d=0;d<p.length;d++){var A=l(p,d,p[d],E+1)||n.stringify(null);S.push(f+t+A)}return"["+S.join(",")+f+"]"}if(-1!==s.indexOf(p)){if(o)return n.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}s.push(p);for(var y=a(p).sort(u&&u(p)),S=[],d=0;d<y.length;d++){var r=y[d],I=l(p,r,p[r],E+1);if(I){var h=n.stringify(r)+T+I;S.push(f+t+h)}}return s.splice(s.indexOf(p),1),"{"+S.join(",")+f+"}"}}({"":e},"",e,0)};var i=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},a=Object.keys||function(e){var r=Object.prototype.hasOwnProperty||function(){return!0},t=[];for(var n in e)r.call(e,n)&&t.push(n);return t}},{jsonify:40}],40:[function(e,r,t){t.parse=e("./lib/parse"),t.stringify=e("./lib/stringify")},{"./lib/parse":41,"./lib/stringify":42}],41:[function(e,r,t){var n,i,a,o,c={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"	"},u=function(e){throw{name:"SyntaxError",message:e,at:n,text:a}},s=function(e){return e&&e!==i&&u("Expected '"+e+"' instead of '"+i+"'"),i=a.charAt(n),n+=1,i},l=function(){var e,r="";for("-"===i&&(r="-",s("-"));i>="0"&&"9">=i;)r+=i,s();if("."===i)for(r+=".";s()&&i>="0"&&"9">=i;)r+=i;if("e"===i||"E"===i)for(r+=i,s(),"-"!==i&&"+"!==i||(r+=i,s());i>="0"&&"9">=i;)r+=i,s();return e=+r,isFinite(e)?e:void u("Bad number")},p=function(){var e,r,t,n="";if('"'===i)for(;s();){if('"'===i)return s(),n;if("\\"===i)if(s(),"u"===i){for(t=0,r=0;4>r&&(e=parseInt(s(),16),isFinite(e));r+=1)t=16*t+e;n+=String.fromCharCode(t)}else{if("string"!=typeof c[i])break;n+=c[i]}else n+=i}u("Bad string")},E=function(){for(;i&&" ">=i;)s()},f=function(){switch(i){case"t":return s("t"),s("r"),s("u"),s("e"),!0;case"f":return s("f"),s("a"),s("l"),s("s"),s("e"),!1;case"n":return s("n"),s("u"),s("l"),s("l"),null}u("Unexpected '"+i+"'")},T=function(){var e=[];if("["===i){if(s("["),E(),"]"===i)return s("]"),e;for(;i;){if(e.push(o()),E(),"]"===i)return s("]"),e;s(","),E()}}u("Bad array")},S=function(){var e,r={};if("{"===i){if(s("{"),E(),"}"===i)return s("}"),r;for(;i;){if(e=p(),E(),s(":"),Object.hasOwnProperty.call(r,e)&&u('Duplicate key "'+e+'"'),r[e]=o(),E(),"}"===i)return s("}"),r;s(","),E()}}u("Bad object")};o=function(){switch(E(),i){case"{":return S();case"[":return T();case'"':return p();case"-":return l();default:return i>="0"&&"9">=i?l():f()}},r.exports=function(e,r){var t;return a=e,n=0,i=" ",t=o(),E(),i&&u("Syntax error"),"function"==typeof r?function c(e,t){var n,i,a=e[t];if(a&&"object"==typeof a)for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(i=c(a,n),void 0!==i?a[n]=i:delete a[n]);return r.call(e,t,a)}({"":t},""):t}},{}],42:[function(e,r,t){function n(e){return u.lastIndex=0,u.test(e)?'"'+e.replace(u,function(e){var r=s[e];return"string"==typeof r?r:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function i(e,r){var t,u,s,l,p,E=a,f=r[e];switch(f&&"object"==typeof f&&"function"==typeof f.toJSON&&(f=f.toJSON(e)),"function"==typeof c&&(f=c.call(r,e,f)),typeof f){case"string":return n(f);case"number":return isFinite(f)?String(f):"null";case"boolean":case"null":return String(f);case"object":if(!f)return"null";if(a+=o,p=[],"[object Array]"===Object.prototype.toString.apply(f)){for(l=f.length,t=0;l>t;t+=1)p[t]=i(t,f)||"null";return s=0===p.length?"[]":a?"[\n"+a+p.join(",\n"+a)+"\n"+E+"]":"["+p.join(",")+"]",a=E,s}if(c&&"object"==typeof c)for(l=c.length,t=0;l>t;t+=1)u=c[t],"string"==typeof u&&(s=i(u,f),s&&p.push(n(u)+(a?": ":":")+s));else for(u in f)Object.prototype.hasOwnProperty.call(f,u)&&(s=i(u,f),s&&p.push(n(u)+(a?": ":":")+s));return s=0===p.length?"{}":a?"{\n"+a+p.join(",\n"+a)+"\n"+E+"}":"{"+p.join(",")+"}",a=E,s}}var a,o,c,u=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};r.exports=function(e,r,t){var n;if(a="",o="","number"==typeof t)for(n=0;t>n;n+=1)o+=" ";else"string"==typeof t&&(o=t);if(c=r,r&&"function"!=typeof r&&("object"!=typeof r||"number"!=typeof r.length))throw new Error("JSON.stringify");return i("",{"":e})}},{}],43:[function(e,r,t){"use strict";!function(e){e[e.VALUES="values"]="VALUES",e[e.COUNT="count"]="COUNT",e[e.VALID="valid"]="VALID",e[e.MISSING="missing"]="MISSING",e[e.DISTINCT="distinct"]="DISTINCT",e[e.SUM="sum"]="SUM",e[e.MEAN="mean"]="MEAN",e[e.AVERAGE="average"]="AVERAGE",e[e.VARIANCE="variance"]="VARIANCE",e[e.VARIANCEP="variancep"]="VARIANCEP",e[e.STDEV="stdev"]="STDEV",e[e.STDEVP="stdevp"]="STDEVP",e[e.MEDIAN="median"]="MEDIAN",e[e.Q1="q1"]="Q1",e[e.Q3="q3"]="Q3",e[e.MODESKEW="modeskew"]="MODESKEW",e[e.MIN="min"]="MIN",e[e.MAX="max"]="MAX",e[e.ARGMIN="argmin"]="ARGMIN",e[e.ARGMAX="argmax"]="ARGMAX"}(t.AggregateOp||(t.AggregateOp={}));var n=t.AggregateOp;t.AGGREGATE_OPS=[n.VALUES,n.COUNT,n.VALID,n.MISSING,n.DISTINCT,n.SUM,n.MEAN,n.AVERAGE,n.VARIANCE,n.VARIANCEP,n.STDEV,n.STDEVP,n.MEDIAN,n.Q1,n.Q3,n.MODESKEW,n.MIN,n.MAX,n.ARGMIN,n.ARGMAX],t.SUM_OPS=[n.COUNT,n.SUM,n.DISTINCT],t.SHARED_DOMAIN_OPS=[n.MEAN,n.AVERAGE,n.STDEV,n.STDEVP,n.MEDIAN,n.Q1,n.Q3,n.MIN,n.MAX]},{}],44:[function(e,r,t){"use strict";!function(e){e[e.TOP="top"]="TOP",e[e.RIGHT="right"]="RIGHT",e[e.LEFT="left"]="LEFT",e[e.BOTTOM="bottom"]="BOTTOM"}(t.AxisOrient||(t.AxisOrient={}));t.AxisOrient;t.defaultAxisConfig={offset:void 0,grid:void 0,labels:!0,labelMaxLength:25,tickSize:void 0,characterWidth:6},t.defaultFacetAxisConfig={axisWidth:0,labels:!0,grid:!1,tickSize:0}},{}],45:[function(e,r,t){"use strict";function n(e){switch(e){case i.ROW:case i.COLUMN:case i.SIZE:case i.SHAPE:return 6;default:return 10}}var i=e("./channel");t.autoMaxBins=n},{"./channel":46}],46:[function(e,r,t){"use strict";function n(e,r){return!!i(e)[r]}function i(e){switch(e){case t.X:case t.Y:case t.COLOR:case t.DETAIL:case t.ORDER:case t.OPACITY:case t.ROW:case t.COLUMN:return{point:!0,tick:!0,rule:!0,circle:!0,square:!0,bar:!0,line:!0,area:!0,text:!0};case t.X2:case t.Y2:return{rule:!0,bar:!0,area:!0};case t.SIZE:return{point:!0,tick:!0,rule:!0,circle:!0,square:!0,bar:!0,text:!0};case t.SHAPE:return{point:!0};case t.TEXT:return{text:!0};case t.PATH:return{line:!0}}return{}}function a(e){switch(e){case t.X:case t.Y:case t.COLOR:case t.OPACITY:case t.LABEL:case t.DETAIL:return{measure:!0,dimension:!0};case t.ROW:case t.COLUMN:case t.SHAPE:return{measure:!1,dimension:!0};case t.X2:case t.Y2:case t.SIZE:case t.TEXT:return{measure:!0,dimension:!1};case t.PATH:return{measure:!1,dimension:!0}}throw new Error("Invalid encoding channel"+e)}function o(e){return!c.contains([t.DETAIL,t.PATH,t.TEXT,t.LABEL,t.ORDER],e)}var c=e("./util");!function(e){e[e.X="x"]="X",e[e.Y="y"]="Y",e[e.X2="x2"]="X2",e[e.Y2="y2"]="Y2",e[e.ROW="row"]="ROW",e[e.COLUMN="column"]="COLUMN",e[e.SHAPE="shape"]="SHAPE",e[e.SIZE="size"]="SIZE",e[e.COLOR="color"]="COLOR",e[e.TEXT="text"]="TEXT",e[e.DETAIL="detail"]="DETAIL",e[e.LABEL="label"]="LABEL",e[e.PATH="path"]="PATH",e[e.ORDER="order"]="ORDER",e[e.OPACITY="opacity"]="OPACITY"}(t.Channel||(t.Channel={}));var u=t.Channel;t.X=u.X,t.Y=u.Y,t.X2=u.X2,t.Y2=u.Y2,t.ROW=u.ROW,t.COLUMN=u.COLUMN,t.SHAPE=u.SHAPE,t.SIZE=u.SIZE,t.COLOR=u.COLOR,t.TEXT=u.TEXT,t.DETAIL=u.DETAIL,t.LABEL=u.LABEL,t.PATH=u.PATH,t.ORDER=u.ORDER,t.OPACITY=u.OPACITY,t.CHANNELS=[t.X,t.Y,t.X2,t.Y2,t.ROW,t.COLUMN,t.SIZE,t.SHAPE,t.COLOR,t.PATH,t.ORDER,t.OPACITY,t.TEXT,t.DETAIL,t.LABEL],t.UNIT_CHANNELS=c.without(t.CHANNELS,[t.ROW,t.COLUMN]),t.UNIT_SCALE_CHANNELS=c.without(t.UNIT_CHANNELS,[t.PATH,t.ORDER,t.DETAIL,t.TEXT,t.LABEL,t.X2,t.Y2]),t.NONSPATIAL_CHANNELS=c.without(t.UNIT_CHANNELS,[t.X,t.Y,t.X2,t.Y2]),t.NONSPATIAL_SCALE_CHANNELS=c.without(t.UNIT_SCALE_CHANNELS,[t.X,t.Y,t.X2,t.Y2]),t.STACK_GROUP_CHANNELS=[t.COLOR,t.DETAIL,t.ORDER,t.OPACITY,t.SIZE],
t.supportMark=n,t.getSupportedMark=i,t.getSupportedRole=a,t.hasScale=o},{"./util":55}],47:[function(e,r,t){"use strict";function n(e){return!!(e&&(e.year||e.quarter||e.month||e.date||e.day||e.hours||e.minutes||e.seconds||e.milliseconds))}function i(e){return u.isNumber(e)?e-1+"":(console.warn("Potentially invalid quarter",e),e)}function a(e){if(u.isNumber(e))return e-1+"";var r=e.toLowerCase(),n=t.MONTHS.indexOf(r);if(-1!==n)return n+"";var i=r.substr(0,3),a=t.SHORT_MONTHS.indexOf(i);return-1!==a?a+"":(console.warn("Potentially invalid month",e),e)}function o(e){if(u.isNumber(e))return e%7+"";var r=e.toLowerCase(),n=t.DAYS.indexOf(r);if(-1!==n)return n+"";var i=r.substr(0,3),a=t.SHORT_DAYS.indexOf(i);return-1!==a?a+"":(console.warn("Potentially invalid day",e),e)}function c(e,r){void 0===r&&(r=!1);var t=[];if(r&&void 0!==e.day)for(var n=0,c=["year","quarter","month","date"];n<c.length;n++){var s=c[n];if(void 0!==e[s]){console.warn("Dropping day from datetime",JSON.stringify(e),"as day cannot be combined with",s),e=u.duplicate(e),delete e.day;break}}if(void 0!==e.year?t.push(e.year):void 0!==e.day?t.push(2006):t.push(0),void 0!==e.month){var l=r?a(e.month):e.month;t.push(l)}else if(void 0!==e.quarter){var p=r?i(e.quarter):e.quarter;t.push(p+"*3")}else t.push(0);if(void 0!==e.date)t.push(e.date);else if(void 0!==e.day){var E=r?o(e.day):e.day;t.push(E+"+1")}else t.push(1);for(var f=0,T=["hours","minutes","seconds","milliseconds"];f<T.length;f++){var S=T[f];void 0!==e[S]?t.push(e[S]):t.push(0)}return"datetime("+t.join(", ")+")"}var u=e("./util");t.isDateTime=n,t.MONTHS=["january","february","march","april","may","june","july","august","september","october","november","december"],t.SHORT_MONTHS=t.MONTHS.map(function(e){return e.substr(0,3)}),t.DAYS=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],t.SHORT_DAYS=t.DAYS.map(function(e){return e.substr(0,3)}),t.dateTimeExpr=c},{"./util":55}],48:[function(e,r,t){"use strict";function n(e){var r=0;return e.color&&r++,e.opacity&&r++,e.size&&r++,e.shape&&r++,r}function i(e){return S.CHANNELS.filter(function(r){return a(e,r)})}function a(e,r){var t=e&&e[r];return t&&(void 0!==t.field||d.isArray(t)&&t.length>0)}function o(e){return d.some(S.CHANNELS,function(r){return!(!a(e,r)||!e[r].aggregate)})}function c(e){return e&&(!!e.x&&!!e.x2||!!e.y&&!!e.y2)}function u(e){var r=[];return S.CHANNELS.forEach(function(t){a(e,t)&&(d.isArray(e[t])?e[t].forEach(function(e){r.push(e)}):r.push(e[t]))}),r}function s(e,r,t){l(S.CHANNELS,e,r,t)}function l(e,r,t,n){var i=0;e.forEach(function(e){a(r,e)&&(d.isArray(r[e])?r[e].forEach(function(r){t.call(n,r,e,i++)}):t.call(n,r[e],e,i++))})}function p(e,r,t){return E(S.CHANNELS,e,r,t)}function E(e,r,t,n){var i=[];return e.forEach(function(e){a(r,e)&&(d.isArray(r[e])?r[e].forEach(function(r){i.push(t.call(n,r,e))}):i.push(t.call(n,r[e],e)))}),i}function f(e,r,t,n){return T(S.CHANNELS,e,r,t,n)}function T(e,r,t,n,i){var o=n;return S.CHANNELS.forEach(function(e){a(r,e)&&(d.isArray(r[e])?r[e].forEach(function(r){o=t.call(i,o,r,e)}):o=t.call(i,o,r[e],e))}),o}var S=e("./channel"),d=e("./util");t.countRetinal=n,t.channels=i,t.has=a,t.isAggregate=o,t.isRanged=c,t.fieldDefs=u,t.forEach=s,t.channelMappingForEach=l,t.map=p,t.channelMappingMap=E,t.reduce=f,t.channelMappingReduce=T},{"./channel":46,"./util":55}],49:[function(e,r,t){"use strict";!function(e){e[e.AREA="area"]="AREA",e[e.BAR="bar"]="BAR",e[e.LINE="line"]="LINE",e[e.POINT="point"]="POINT",e[e.TEXT="text"]="TEXT",e[e.TICK="tick"]="TICK",e[e.RULE="rule"]="RULE",e[e.CIRCLE="circle"]="CIRCLE",e[e.SQUARE="square"]="SQUARE",e[e.ERRORBAR="errorBar"]="ERRORBAR"}(t.Mark||(t.Mark={}));var n=t.Mark;t.AREA=n.AREA,t.BAR=n.BAR,t.LINE=n.LINE,t.POINT=n.POINT,t.TEXT=n.TEXT,t.TICK=n.TICK,t.RULE=n.RULE,t.CIRCLE=n.CIRCLE,t.SQUARE=n.SQUARE,t.ERRORBAR=n.ERRORBAR,t.PRIMITIVE_MARKS=[t.AREA,t.BAR,t.LINE,t.POINT,t.TEXT,t.TICK,t.RULE,t.CIRCLE,t.SQUARE]},{}],50:[function(e,r,t){"use strict";!function(e){e[e.LINEAR="linear"]="LINEAR",e[e.LOG="log"]="LOG",e[e.POW="pow"]="POW",e[e.SQRT="sqrt"]="SQRT",e[e.QUANTILE="quantile"]="QUANTILE",e[e.QUANTIZE="quantize"]="QUANTIZE",e[e.ORDINAL="ordinal"]="ORDINAL",e[e.TIME="time"]="TIME",e[e.UTC="utc"]="UTC"}(t.ScaleType||(t.ScaleType={}));t.ScaleType;!function(e){e[e.SECOND="second"]="SECOND",e[e.MINUTE="minute"]="MINUTE",e[e.HOUR="hour"]="HOUR",e[e.DAY="day"]="DAY",e[e.WEEK="week"]="WEEK",e[e.MONTH="month"]="MONTH",e[e.YEAR="year"]="YEAR"}(t.NiceTime||(t.NiceTime={}));t.NiceTime;!function(e){e[e.FIT="fit"]="FIT"}(t.BandSize||(t.BandSize={}));var n=t.BandSize;t.BANDSIZE_FIT=n.FIT,t.defaultScaleConfig={round:!0,textBandWidth:90,bandSize:21,padding:.1,useRawDomain:!1,opacity:[.3,.8],nominalColorRange:"category10",sequentialColorRange:["#AFC6A3","#09622A"],shapeRange:"shapes",fontSizeRange:[8,40],ruleSizeRange:[1,5],tickSizeRange:[1,20]},t.defaultFacetScaleConfig={round:!0,padding:16}},{}],51:[function(e,r,t){"use strict";function n(e){return!!e&&!!e.field&&!!e.op}!function(e){e[e.ASCENDING="ascending"]="ASCENDING",e[e.DESCENDING="descending"]="DESCENDING",e[e.NONE="none"]="NONE"}(t.SortOrder||(t.SortOrder={}));t.SortOrder;t.isSortField=n},{}],52:[function(e,r,t){"use strict";function n(e,r,t){var n=t&&t.mark?t.mark.stacked:void 0;if(c.contains([u.NONE,null,!1],n))return null;if(!c.contains([o.BAR,o.AREA],e))return null;if(!a.isAggregate(r))return null;var s=i.STACK_GROUP_CHANNELS.reduce(function(e,t){return a.has(r,t)&&!r[t].aggregate&&e.push(t),e},[]);if(0===s.length)return null;var l=a.has(r,i.X),p=a.has(r,i.Y),E=l&&!!r.x.aggregate,f=p&&!!r.y.aggregate;return E!==f?{groupbyChannel:E?p?i.Y:null:l?i.X:null,fieldChannel:E?i.X:i.Y,stackByChannels:s,offset:n||u.ZERO}:null}var i=e("./channel"),a=e("./encoding"),o=e("./mark"),c=e("./util");!function(e){e[e.ZERO="zero"]="ZERO",e[e.CENTER="center"]="CENTER",e[e.NORMALIZE="normalize"]="NORMALIZE",e[e.NONE="none"]="NONE"}(t.StackOffset||(t.StackOffset={}));var u=t.StackOffset;t.stack=n},{"./channel":46,"./encoding":48,"./mark":49,"./util":55}],53:[function(e,r,t){"use strict";function n(e){return!!A[e]}function i(e,r){var n=new Date(0,0,1,0,0,0,0);return t.SINGLE_TIMEUNITS.forEach(function(t){if(o(e,t))switch(t){case d.DAY:throw new Error("Cannot convert to TimeUnits containing 'day'");case d.YEAR:n.setFullYear(r.getFullYear());break;case d.QUARTER:n.setMonth(3*Math.floor(r.getMonth()/3));break;case d.MONTH:n.setMonth(r.getMonth());break;case d.DATE:n.setDate(r.getDate());break;case d.HOURS:n.setHours(r.getHours());break;case d.MINUTES:n.setMinutes(r.getMinutes());break;case d.SECONDS:n.setSeconds(r.getSeconds());break;case d.MILLISECONDS:n.setMilliseconds(r.getMilliseconds())}}),n}function a(e){return!!y[e]}function o(e,r){var t=e.toString(),n=r.toString(),i=t.indexOf(n);return i>-1&&(r!==d.SECONDS||0===i||"i"!==t.charAt(i-1))}function c(e){switch(e){case d.HOURS:case d.DAY:case d.MONTH:case d.QUARTER:return T.ScaleType.ORDINAL}return T.ScaleType.TIME}function u(e,r){function n(e){return e===d.QUARTER?"floor(month("+i+")/3)":e+"("+i+")"}var i='datum["'+r+'"]',a=t.SINGLE_TIMEUNITS.reduce(function(r,t){return o(e,t)&&(r[t]=n(t)),r},{});return a.day&&S.keys(a).length>1&&(console.warn('Time unit "'+e+'" is not supported. We are replacing it with ',(e+"").replace("day","date")+"."),delete a.day,a.date=n(d.DATE)),f.dateTimeExpr(a)}function s(e,r){if(S.contains([E.ROW,E.COLUMN,E.SHAPE,E.COLOR],r))return null;switch(e){case d.SECONDS:return S.range(0,60);case d.MINUTES:return S.range(0,60);case d.HOURS:return S.range(0,24);case d.DAY:return S.range(0,7);case d.DATE:return S.range(1,32);case d.MONTH:return S.range(0,12);case d.QUARTER:return[0,3,6,9]}return null}function l(e){return e?o(e,d.SECONDS)?"second":o(e,d.MINUTES)?"minute":o(e,d.HOURS)?"hour":o(e,d.DAY)||o(e,d.DATE)?"day":o(e,d.MONTH)?"month":o(e,d.YEAR)?"year":void 0:void 0}function p(e,r,t){if(e){var n=[];o(e,d.YEAR)&&n.push(t?"%y":"%Y"),o(e,d.QUARTER)&&n.push("'}}Q{{"+r+" | quarter}}{{"+r+" | time:'"),o(e,d.MONTH)&&n.push(t?"%b":"%B"),o(e,d.DAY)?n.push(t?"%a":"%A"):o(e,d.DATE)&&n.push("%d");var i=[];o(e,d.HOURS)&&i.push("%H"),o(e,d.MINUTES)&&i.push("%M"),o(e,d.SECONDS)&&i.push("%S"),o(e,d.MILLISECONDS)&&i.push("%L");var a=[];if(n.length>0&&a.push(n.join("-")),i.length>0&&a.push(i.join(":")),a.length>0){var c="{{"+r+" | time:'"+a.join(" ")+"'}}",u=r.replace(/(\[|\])/g,"\\$1");return c.replace(new RegExp("{{"+u+" \\| time:''}}","g"),"")}}}var E=e("./channel"),f=e("./datetime"),T=e("./scale"),S=e("./util");!function(e){e[e.YEAR="year"]="YEAR",e[e.MONTH="month"]="MONTH",e[e.DAY="day"]="DAY",e[e.DATE="date"]="DATE",e[e.HOURS="hours"]="HOURS",e[e.MINUTES="minutes"]="MINUTES",e[e.SECONDS="seconds"]="SECONDS",e[e.MILLISECONDS="milliseconds"]="MILLISECONDS",e[e.YEARMONTH="yearmonth"]="YEARMONTH",e[e.YEARMONTHDATE="yearmonthdate"]="YEARMONTHDATE",e[e.YEARMONTHDATEHOURS="yearmonthdatehours"]="YEARMONTHDATEHOURS",e[e.YEARMONTHDATEHOURSMINUTES="yearmonthdatehoursminutes"]="YEARMONTHDATEHOURSMINUTES",e[e.YEARMONTHDATEHOURSMINUTESSECONDS="yearmonthdatehoursminutesseconds"]="YEARMONTHDATEHOURSMINUTESSECONDS",e[e.HOURSMINUTES="hoursminutes"]="HOURSMINUTES",e[e.HOURSMINUTESSECONDS="hoursminutesseconds"]="HOURSMINUTESSECONDS",e[e.MINUTESSECONDS="minutesseconds"]="MINUTESSECONDS",e[e.SECONDSMILLISECONDS="secondsmilliseconds"]="SECONDSMILLISECONDS",e[e.QUARTER="quarter"]="QUARTER",e[e.YEARQUARTER="yearquarter"]="YEARQUARTER",e[e.QUARTERMONTH="quartermonth"]="QUARTERMONTH",e[e.YEARQUARTERMONTH="yearquartermonth"]="YEARQUARTERMONTH"}(t.TimeUnit||(t.TimeUnit={}));var d=t.TimeUnit;t.SINGLE_TIMEUNITS=[d.YEAR,d.QUARTER,d.MONTH,d.DAY,d.DATE,d.HOURS,d.MINUTES,d.SECONDS,d.MILLISECONDS];var A=t.SINGLE_TIMEUNITS.reduce(function(e,r){return e[r]=!0,e},{});t.isSingleTimeUnit=n,t.convert=i,t.MULTI_TIMEUNITS=[d.YEARQUARTER,d.YEARQUARTERMONTH,d.YEARMONTH,d.YEARMONTHDATE,d.YEARMONTHDATEHOURS,d.YEARMONTHDATEHOURSMINUTES,d.YEARMONTHDATEHOURSMINUTESSECONDS,d.QUARTERMONTH,d.HOURSMINUTES,d.HOURSMINUTESSECONDS,d.MINUTESSECONDS,d.SECONDSMILLISECONDS];var y=t.MULTI_TIMEUNITS.reduce(function(e,r){return e[r]=!0,e},{});t.isMultiTimeUnit=a,t.TIMEUNITS=t.SINGLE_TIMEUNITS.concat(t.MULTI_TIMEUNITS),t.containsTimeUnit=o,t.defaultScaleType=c,t.fieldExpr=u,t.rawDomain=s,t.smallestUnit=l,t.template=p},{"./channel":46,"./datetime":47,"./scale":50,"./util":55}],54:[function(e,r,t){"use strict";function n(e){var r=e;return t.TYPE_FROM_SHORT_TYPE[r.toUpperCase()]||r.toLowerCase()}!function(e){e[e.QUANTITATIVE="quantitative"]="QUANTITATIVE",e[e.ORDINAL="ordinal"]="ORDINAL",e[e.TEMPORAL="temporal"]="TEMPORAL",e[e.NOMINAL="nominal"]="NOMINAL"}(t.Type||(t.Type={}));var i=t.Type;t.QUANTITATIVE=i.QUANTITATIVE,t.ORDINAL=i.ORDINAL,t.TEMPORAL=i.TEMPORAL,t.NOMINAL=i.NOMINAL,t.SHORT_TYPE={quantitative:"Q",temporal:"T",nominal:"N",ordinal:"O"},t.TYPE_FROM_SHORT_TYPE={Q:t.QUANTITATIVE,T:t.TEMPORAL,O:t.ORDINAL,N:t.NOMINAL},t.getFullName=n},{}],55:[function(e,r,t){"use strict";function n(e,r){var t={};return r.forEach(function(r){e.hasOwnProperty(r)&&(t[r]=e[r])}),t}function i(e,r,t){if(arguments.length<3&&(t=1,arguments.length<2&&(r=e,e=0)),(r-e)/t===1/0)throw new Error("Infinite range");var n,i=[],a=-1;if(0>t)for(;(n=e+t*++a)>r;)i.push(n);else for(;(n=e+t*++a)<r;)i.push(n);return i}function a(e,r){var t=O.duplicate(e);return r.forEach(function(e){delete t[e]}),t}function o(e){return m.isString(e)||m.isNumber(e)||m.isBoolean(e)?String(e):N(e)}function c(e,r){return e.indexOf(r)>-1}function u(e,r){return e.filter(function(e){return!c(r,e)})}function s(e,r){return e.concat(u(r,e))}function l(e,r,t){if(e.forEach)e.forEach.call(t,r);else for(var n in e)e.hasOwnProperty(n)&&r.call(t,e[n],n,e)}function p(e,r,t,n){if(e.reduce)return e.reduce.call(n,r,t);for(var i in e)e.hasOwnProperty(i)&&(t=r.call(n,t,e[i],i,e));return t}function E(e,r,t){if(e.map)return e.map.call(t,r);var n=[];for(var i in e)e.hasOwnProperty(i)&&n.push(r.call(t,e[i],i,e));return n}function f(e,r){for(var t=0,n=0;n<e.length;n++)if(r(e[n],n,t++))return!0;return!1}function T(e,r){for(var t=0,n=0;n<e.length;n++)if(!r(e[n],n,t++))return!1;return!0}function S(e){return[].concat.apply([],e)}function d(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];for(var n=0;n<r.length;n++)e=A(e,r[n]);return e}function A(e,r){if("object"!=typeof r||null===r)return e;for(var t in r)r.hasOwnProperty(t)&&void 0!==r[t]&&("object"!=typeof r[t]||null===r[t]?e[t]=r[t]:"object"!=typeof e[t]||null===e[t]?e[t]=d(r[t].constructor===Array?[]:{},r[t]):d(e[t],r[t]));return e}function y(e,r){var t,n,i,a=[],o={};for(n=0,i=e.length;i>n;++n)t=r?r(e[n]):e[n],t in o||(o[t]=1,a.push(e[n]));return a}function I(e){console.warn("[VL Warning]",e)}function h(e){console.error("[VL Error]",e)}function g(e,r){for(var t in e)if(e.hasOwnProperty(t)&&r[t]&&e[t]&&r[t]!==e[t])return!0;return!1}var N=e("json-stable-stringify"),L=e("datalib/src/util");t.keys=L.keys,t.extend=L.extend,t.duplicate=L.duplicate,t.isArray=L.isArray,t.vals=L.vals,t.truncate=L.truncate,t.toMap=L.toMap,t.isObject=L.isObject,t.isString=L.isString,t.isNumber=L.isNumber,t.isBoolean=L.isBoolean;var O=e("datalib/src/util"),m=e("datalib/src/util");t.pick=n,t.range=i,t.omit=a,t.hash=o,t.contains=c,t.without=u,t.union=s,t.forEach=l,t.reduce=p,t.map=E,t.some=f,t.every=T,t.flatten=S,t.mergeDeep=d,t.unique=y,t.warning=I,t.error=h,t.differ=g},{"datalib/src/util":38,"json-stable-stringify":39}]},{},[14])(14)});
//# sourceMappingURL=compassql.min.js.map
